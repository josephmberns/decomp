//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdlib.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003768(void);
int64_t function_100003800(int64_t a1);
int64_t function_100003824(void);
int64_t function_100003854(void);
int64_t function_1000038cc(void);
int64_t function_100003908(void);
int64_t function_100003964(void);
int64_t function_100003a48(void);
int64_t function_100003ab0(void);
int64_t function_100003b40(void);
int64_t function_100003dcc(int64_t a1, int64_t a2, int64_t a3, int64_t a4, char * a5);
int32_t function_100003dd8(struct _IO_FILE * stream, char * format, ...);
void function_100003de4(int64_t * ptr);
int64_t * function_100003df0(int32_t size);

// --------------------- Global Variables ---------------------

int64_t g1 = 0x100000cfeedfacf; // 0x100008000
int32_t g2;

// ------- Dynamically Linked Functions Without Header --------

int64_t ___snprintf_chk(int64_t a1, int64_t a2, int64_t a3, int64_t a4, char * a5);
int32_t _fprintf(struct _IO_FILE * a1, char * a2, ...);
void _free(int64_t * a1);
int64_t * _malloc(int32_t a1);

// ------------------------ Functions -------------------------

// Address range: 0x100003768 - 0x100003800
int64_t function_100003768(void) {
    // 0x100003768
    int64_t v1; // 0x100003768
    int32_t v2 = v1; // 0x100003774
    int64_t * v3 = _malloc(132 * v2 + 24); // 0x100003790
    int64_t result = 0; // 0x1000037a4
    if (v3 != NULL) {
        // 0x1000037b4
        result = (int64_t)v3;
        *(int32_t *)(result + 8) = v2;
        *(int32_t *)(result + 12) = -1;
        *v3 = result + 16;
    }
    // 0x1000037f0
    return result;
}

// Address range: 0x100003800 - 0x100003824
int64_t function_100003800(int64_t a1) {
    // 0x100003800
    _free((int64_t *)a1);
    return &g2;
}

// Address range: 0x100003824 - 0x100003854
int64_t function_100003824(void) {
    // 0x100003824
    int64_t v1; // 0x100003824
    return *(int32_t *)(v1 + 12) >= 0;
}

// Address range: 0x100003854 - 0x1000038cc
int64_t function_100003854(void) {
    // 0x100003854
    int64_t v1; // 0x100003854
    uint32_t v2 = *(int32_t *)(v1 + 12); // 0x100003864
    int64_t result = 0; // 0x100003878
    if (v2 >= 0) {
        int32_t v3 = *(int32_t *)(132 * (int64_t)v2 + v1); // 0x100003898
        result = v3 == (int32_t)v1;
    }
    // 0x1000038b0
    return result;
}

// Address range: 0x1000038cc - 0x100003908
int64_t function_1000038cc(void) {
    // 0x1000038cc
    int64_t result; // 0x1000038cc
    int32_t * v1 = (int32_t *)(result + 12); // 0x1000038d8
    uint32_t v2 = *v1; // 0x1000038d8
    if (v2 >= 0) {
        // 0x1000038ec
        *v1 = v2 - 1;
    }
    // 0x100003900
    return result;
}

// Address range: 0x100003908 - 0x100003964
int64_t function_100003908(void) {
    // 0x100003908
    int64_t v1; // 0x100003908
    uint32_t v2 = *(int32_t *)(v1 + 12); // 0x100003914
    int64_t result = 0; // 0x100003920
    if (v2 >= 0) {
        // 0x100003928
        result = v1 + 4 + 132 * (int64_t)v2;
    }
    // 0x100003958
    return result;
}

// Address range: 0x100003964 - 0x100003a48
int64_t function_100003964(void) {
    // 0x100003964
    int64_t v1; // 0x100003964
    int32_t * v2 = (int32_t *)(v1 + 12); // 0x100003980
    int32_t v3 = *v2; // 0x100003980
    int32_t v4 = v3 + 1; // 0x100003984
    *v2 = v4;
    int32_t v5 = v4; // 0x10000399c
    int64_t v6; // 0x100003964
    if (v4 == *(int32_t *)(v1 + 8)) {
        // 0x1000039a4
        *v2 = v3;
        int64_t v7 = *(int64_t *)*(int64_t *)0x100004008; // 0x1000039bc
        int32_t v8 = _fprintf((struct _IO_FILE *)v7, "*** Error: Overflow in exception context.\n"); // 0x1000039c8
        v5 = *v2;
        v6 = v8;
    }
    int64_t v9 = ___snprintf_chk(v6 + 4 + 132 * (int64_t)v5, 128, 0, -1, "%s"); // 0x100003a14
    *(int32_t *)(132 * (int64_t)*v2 + v9) = (int32_t)v1;
    return 0xffffffff;
}

// Address range: 0x100003a48 - 0x100003ab0
int64_t function_100003a48(void) {
    // 0x100003a48
    return function_100003964();
}

// Address range: 0x100003ab0 - 0x100003b40
int64_t function_100003ab0(void) {
    // 0x100003ab0
    _fprintf((struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004010, "Bar door is open.\n");
    function_100003a48();
    if ((int32_t)function_100003824() == 0) {
        int64_t v1 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003b08
        _fprintf((struct _IO_FILE *)v1, "Baz has been called without errors.\n");
    }
    int64_t v2 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003b24
    return _fprintf((struct _IO_FILE *)v2, "Bar door is closed.\n");
}

// Address range: 0x100003b40 - 0x100003cec
int64_t function_100003b40(void) {
    // 0x100003b40
    _fprintf((struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004010, "Foo entering bar.\n");
    function_100003ab0();
    int64_t v1; // 0x100003b40
    if ((int32_t)function_100003854() != 0) {
        int64_t v2 = *(int64_t *)*(int64_t *)0x100004008; // 0x100003b98
        function_100003908();
        _fprintf((struct _IO_FILE *)v2, "I am foo() and I deaall wrth U0 DriNk Errors with my own bottle... GOT oNE! [%s]\n", (char *)v1);
        function_1000038cc();
        // 0x100003b90
        while ((int32_t)function_100003854() != 0) {
            // 0x100003b90
            v2 = *(int64_t *)*(int64_t *)0x100004008;
            function_100003908();
            _fprintf((struct _IO_FILE *)v2, "I am foo() and I deaall wrth U0 DriNk Errors with my own bottle... GOT oNE! [%s]\n", (char *)v1);
            function_1000038cc();
        }
    }
    int64_t result = function_100003824(); // 0x100003be4
    if ((int32_t)result != 0) {
        // 0x100003ce0
        return result;
    }
    int64_t * v3 = (int64_t *)*(int64_t *)0x100004010; // 0x100003c08
    _fprintf((struct _IO_FILE *)*v3, "Foo left the bar.\n");
    _fprintf((struct _IO_FILE *)*v3, "Foo entering bar again.\n");
    function_100003ab0();
    if ((int32_t)function_100003854() != 0) {
        int64_t v4 = *(int64_t *)*(int64_t *)0x100004008; // 0x100003c60
        function_100003908();
        _fprintf((struct _IO_FILE *)v4, "I am foo() and I deaall wrth U0 DriNk Errors with my own bottle... GOT oNE! [%s]\n", (char *)v1);
        function_1000038cc();
        // 0x100003c58
        while ((int32_t)function_100003854() != 0) {
            // 0x100003c58
            v4 = *(int64_t *)*(int64_t *)0x100004008;
            function_100003908();
            _fprintf((struct _IO_FILE *)v4, "I am foo() and I deaall wrth U0 DriNk Errors with my own bottle... GOT oNE! [%s]\n", (char *)v1);
            function_1000038cc();
        }
    }
    int64_t v5 = function_100003824(); // 0x100003cac
    int64_t result2 = v5; // 0x100003cb8
    if ((int32_t)v5 == 0) {
        int64_t v6 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003ccc
        result2 = _fprintf((struct _IO_FILE *)v6, "Foo left the bar.\n");
    }
    // 0x100003ce0
    return result2;
}

// Address range: 0x100003cec - 0x100003dcc
int64_t entry_point(void) {
    int64_t v1 = function_100003768(); // 0x100003d08
    g1 = v1;
    function_100003b40();
    if ((int32_t)function_100003824() == 0) {
        int64_t v2 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003d44
        _fprintf((struct _IO_FILE *)v2, "No errors encountered.\n");
    }
    // 0x100003d58
    if ((int32_t)function_100003824() == 0) {
        // 0x100003db4
        function_100003800(v1);
        return 0;
    }
    int64_t v3 = *(int64_t *)0x100004008; // 0x100003d78
    function_100003908();
    int64_t v4; // 0x100003cec
    _fprintf((struct _IO_FILE *)*(int64_t *)v3, "*** Error: %s\n", (char *)v4);
    function_1000038cc();
    // 0x100003d74
    while ((int32_t)function_100003824() != 0) {
        // 0x100003d74
        v3 = *(int64_t *)0x100004008;
        function_100003908();
        _fprintf((struct _IO_FILE *)*(int64_t *)v3, "*** Error: %s\n", (char *)v4);
        function_1000038cc();
    }
    // 0x100003db4
    function_100003800(v1);
    return 0;
}

// Address range: 0x100003dcc - 0x100003dd8
int64_t function_100003dcc(int64_t a1, int64_t a2, int64_t a3, int64_t a4, char * a5) {
    // 0x100003dcc
    return ___snprintf_chk(a1, a2, a3, a4, a5);
}

// Address range: 0x100003dd8 - 0x100003de4
int32_t function_100003dd8(struct _IO_FILE * stream, char * format, ...) {
    // 0x100003dd8
    return _fprintf(stream, format);
}

// Address range: 0x100003de4 - 0x100003df0
void function_100003de4(int64_t * ptr) {
    // 0x100003de4
    _free(ptr);
}

// Address range: 0x100003df0 - 0x100003dfc
int64_t * function_100003df0(int32_t size) {
    // 0x100003df0
    return _malloc(size);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 15

