//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>

// ----------------- Float Types Definitions ------------------

typedef long double float128_t;

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003978(void);
int64_t function_1000039bc(int64_t a1, int64_t a2);
int64_t function_100003a30(void);
int64_t function_100003be8(void);
int64_t function_100003cf0(void);
int64_t function_100003dc8(void);
void function_100003f1c(int64_t * ptr);
int64_t * function_100003f28(int32_t size);
int32_t function_100003f34(char * format, ...);
int64_t * function_100003f40(int64_t * ptr, int32_t size);
int32_t function_100003f4c(char * nptr, char ** endptr, int32_t base);

// --------------------- Global Variables ---------------------

int32_t g1;

// ------- Dynamically Linked Functions Without Header --------

void _free(int64_t * a1);
int64_t * _malloc(int32_t a1);
int32_t _printf(char * a1, ...);
int64_t * _realloc(int64_t * a1, int32_t a2);
int32_t _strtol(char * a1, char ** a2, int32_t a3);

// ------------------------ Functions -------------------------

// Address range: 0x100003978 - 0x1000039bc
int64_t function_100003978(void) {
    int64_t * v1 = _malloc(16); // 0x100003988
    int64_t result = (int64_t)v1; // 0x100003988
    *(int32_t *)(result + 4) = 0;
    *(int32_t *)v1 = 1;
    *(int64_t *)(result + 8) = 0;
    return result;
}

// Address range: 0x1000039bc - 0x100003a30
int64_t function_1000039bc(int64_t a1, int64_t a2) {
    int64_t * v1 = (int64_t *)(a1 + 8); // 0x1000039d4
    int32_t * v2 = (int32_t *)(a1 + 4); // 0x1000039dc
    int64_t result = (int64_t)_realloc((int64_t *)*v1, 8 * *v2 + 8); // 0x1000039f4
    *v1 = result;
    int32_t v3 = *v2; // 0x100003a10
    *v2 = v3 + 1;
    *(int64_t *)(8 * (int64_t)v3 + result) = a2;
    return result;
}

// Address range: 0x100003a30 - 0x100003be8
int64_t function_100003a30(void) {
    // 0x100003a30
    int64_t v1; // 0x100003a30
    char * v2 = (char *)v1; // bp-32, 0x100003a3c
    int64_t result; // 0x100003a30
    if (v1 == 0) {
        // 0x100003a60
        result = function_100003978();
    }
    // 0x100003a6c
    char * v3; // 0x100003a70
    while (true) {
      lab_0x100003a70_2:
        // 0x100003a70
        v3 = v2;
        char v4 = *v3; // 0x100003a74
        switch (v4) {
            case 0: {
                goto lab_0x100003ba8;
            }
            case 93: {
                if (v1 != 0) {
                    // 0x100003ab4
                    *(int64_t *)v1 = (int64_t)v3 + 1;
                }
                // 0x100003bd8
                return result;
            }
            case 91: {
                int64_t v5 = function_100003978(); // 0x100003aec
                *(int32_t *)v5 = 1;
                *(int32_t *)(v5 + 4) = 0;
                function_1000039bc(result, v5);
                function_100003a30();
                goto lab_0x100003a70_2;
            }
            default: {
                int32_t v6 = v4; // 0x100003b30
                if (v4 < 48 == (47 - v6 & v6) < 0) {
                    int32_t v7 = v6 - 57; // 0x100003b4c
                    if (v7 == 0 || v7 < 0 != (56 - v6 & v6) < 0) {
                        int64_t v8 = function_100003978(); // 0x100003b5c
                        *(int32_t *)v8 = 0;
                        *(int32_t *)(v8 + 4) = _strtol(v2, &v2, 10);
                        function_1000039bc(result, v8);
                        goto lab_0x100003a70_2;
                    } else {
                        // 0x100003b98
                        v2 = (char *)((int64_t)v3 + 1);
                        goto lab_0x100003a70_2;
                    }
                } else {
                    // 0x100003b98
                    v2 = (char *)((int64_t)v3 + 1);
                    goto lab_0x100003a70_2;
                }
            }
        }
    }
  lab_0x100003ba8:
    if (v1 != 0) {
        // 0x100003bbc
        *(int64_t *)v1 = (int64_t)v3;
    }
    // 0x100003bd8
    return result;
}

// Address range: 0x100003be8 - 0x100003cf0
int64_t function_100003be8(void) {
    // 0x100003be8
    int64_t v1; // 0x100003be8
    if (v1 == 0) {
        // 0x100003ce4
        return 0;
    }
    if ((int32_t)v1 == 0) {
        // 0x100003ce4
        return _printf("%d", v1);
    }
    // 0x100003c4c
    _printf("[");
    int32_t * v2 = (int32_t *)(v1 + 4); // 0x100003c68
    int32_t v3 = *v2; // 0x100003c68
    int32_t v4 = -v3; // 0x100003c6c
    if (v4 < 0 != (v3 & v4) < 0) {
        int32_t v5 = 0;
        function_100003be8();
        int32_t v6 = *v2; // 0x100003c98
        int32_t v7 = v6 - 1; // 0x100003c9c
        int32_t v8 = v5 - v7; // 0x100003ca0
        int32_t v9 = v6; // 0x100003ca8
        if (v8 < 0 != ((v8 ^ v5) & (v7 ^ v5)) < 0) {
            // 0x100003cb0
            _printf(", ");
            v9 = *v2;
        }
        int32_t v10 = v5 + 1; // 0x100003cc8
        while (v10 - v9 < 0 != ((v10 - v9 ^ v10) & (v9 ^ v10)) < 0) {
            // 0x100003c7c
            v5 = v10;
            function_100003be8();
            v6 = *v2;
            v7 = v6 - 1;
            v8 = v5 - v7;
            v9 = v6;
            if (v8 < 0 != ((v8 ^ v5) & (v7 ^ v5)) < 0) {
                // 0x100003cb0
                _printf(", ");
                v9 = *v2;
            }
            // 0x100003cc4
            v10 = v5 + 1;
        }
    }
    // 0x100003ce4
    return _printf("]");
}

// Address range: 0x100003cf0 - 0x100003dc8
int64_t function_100003cf0(void) {
    // 0x100003cf0
    int64_t result; // 0x100003cf0
    int64_t v1; // 0x100003cf0
    if (v1 == 0) {
        // 0x100003d18
        result = function_100003978();
    }
    // 0x100003d24
    if ((int32_t)v1 == 0) {
        int64_t v2 = function_100003978(); // 0x100003d3c
        int64_t v3; // 0x100003cf0
        *(float128_t *)v2 = *(float128_t *)&v3;
        function_1000039bc(result, v2);
        // 0x100003db8
        return result;
    }
    int32_t * v4 = (int32_t *)(v1 + 4); // 0x100003d74
    int32_t v5 = *v4; // 0x100003d74
    int32_t v6 = -v5; // 0x100003d78
    if (v6 < 0 == (v5 & v6) < 0) {
        // 0x100003db8
        return result;
    }
    int32_t v7 = 0; // 0x100003d80
    function_100003cf0();
    v7++;
    int32_t v8 = *v4; // 0x100003d74
    while (v7 - v8 < 0 != ((v7 - v8 ^ v7) & (v8 ^ v7)) < 0) {
        // 0x100003d88
        function_100003cf0();
        v7++;
        v8 = *v4;
    }
    // 0x100003db8
    return result;
}

// Address range: 0x100003dc8 - 0x100003e94
int64_t function_100003dc8(void) {
    // 0x100003dc8
    int64_t v1; // 0x100003dc8
    if (v1 == 0) {
        // 0x100003e88
        return 0;
    }
    if ((int32_t)v1 == 0) {
        // 0x100003e7c
        _free((int64_t *)v1);
        // 0x100003e88
        return &g1;
    }
    int32_t * v2 = (int32_t *)(v1 + 4); // 0x100003e0c
    int32_t v3 = *v2; // 0x100003e0c
    if (v3 == 0) {
        // 0x100003e7c
        _free((int64_t *)v1);
        // 0x100003e88
        return &g1;
    }
    int32_t v4 = -v3; // 0x100003e34
    int32_t v5 = 0; // 0x100003e3c
    if (v4 < 0 != (v3 & v4) < 0) {
        function_100003dc8();
        v5++;
        int32_t v6 = *v2; // 0x100003e30
        while (v5 - v6 < 0 != ((v5 - v6 ^ v5) & (v6 ^ v5)) < 0) {
            // 0x100003e44
            function_100003dc8();
            v5++;
            v6 = *v2;
        }
    }
    // 0x100003e6c
    _free((int64_t *)*(int64_t *)(v1 + 8));
    // 0x100003e7c
    _free((int64_t *)v1);
    // 0x100003e88
    return &g1;
}

// Address range: 0x100003e94 - 0x100003f1c
int64_t entry_point(void) {
    // 0x100003e94
    function_100003a30();
    _printf("Nested: ");
    function_100003be8();
    _printf("\n");
    function_100003cf0();
    _printf("Flattened: ");
    function_100003be8();
    return 0;
}

// Address range: 0x100003f1c - 0x100003f28
void function_100003f1c(int64_t * ptr) {
    // 0x100003f1c
    _free(ptr);
}

// Address range: 0x100003f28 - 0x100003f34
int64_t * function_100003f28(int32_t size) {
    // 0x100003f28
    return _malloc(size);
}

// Address range: 0x100003f34 - 0x100003f40
int32_t function_100003f34(char * format, ...) {
    // 0x100003f34
    return _printf(format);
}

// Address range: 0x100003f40 - 0x100003f4c
int64_t * function_100003f40(int64_t * ptr, int32_t size) {
    // 0x100003f40
    return _realloc(ptr, size);
}

// Address range: 0x100003f4c - 0x100003f58
int32_t function_100003f4c(char * nptr, char ** endptr, int32_t base) {
    // 0x100003f4c
    return _strtol(nptr, endptr, base);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 12

