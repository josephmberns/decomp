//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdlib.h>
#include <unistd.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100002fb0(void);
int64_t function_100003034(int64_t a1);
int64_t function_10000306c(void);
int64_t function_10000309c(void);
int64_t function_1000030cc(void);
int64_t function_1000031d0(void);
int64_t function_100003314(void);
int64_t function_10000348c(void);
int64_t function_100003630(void);
int64_t function_1000036b4(void);
int64_t function_100003a5c(void);
int64_t function_100003ca4(void);
int64_t function_100003da4(void);
int64_t function_100003db0(int64_t a1, int64_t a2, int64_t a3);
int64_t * function_100003dbc(int32_t nmemb, int32_t size);
void function_100003dc8(int32_t status);
int32_t function_100003dd4(struct _IO_FILE * stream, char * format, ...);
void function_100003de0(int64_t * ptr);
int64_t * function_100003dec(int32_t size);
int64_t * function_100003df8(int64_t * s, int32_t c, int32_t n);
int32_t function_100003e04(char * format, ...);
int32_t function_100003e10(char * s);

// --------------------- Global Variables ---------------------

int32_t g1;

// ------- Dynamically Linked Functions Without Header --------

int64_t ___stack_chk_fail(void);
int64_t ___strcpy_chk(int64_t a1, int64_t a2, int64_t a3);
int64_t * _calloc(int32_t a1, int32_t a2);
int32_t _fprintf(struct _IO_FILE * a1, char * a2, ...);
void _free(int64_t * a1);
int64_t * _malloc(int32_t a1);
int64_t * _memset(int64_t * a1, int32_t a2, int32_t a3);
int32_t _printf(char * a1, ...);
int32_t _strlen(char * a1);

// ------------------------ Functions -------------------------

// Address range: 0x100002fb0 - 0x100003034
int64_t function_100002fb0(void) {
    int64_t * v1 = _malloc(24); // 0x100002fc4
    int64_t v2; // 0x100002fb0
    if (v1 == NULL) {
        int64_t v3 = *(int64_t *)*(int64_t *)0x100004010; // 0x100002fe8
        _fprintf((struct _IO_FILE *)v3, "Failed to allocate node for tag: %d\n", v2);
        _exit(1);
        // UNREACHABLE
    }
    // 0x100003010
    *(int32_t *)v1 = (int32_t)v2;
    int64_t result = (int64_t)v1; // 0x10000301c
    *(int64_t *)(result + 16) = 0;
    return result;
}

// Address range: 0x100003034 - 0x10000306c
int64_t function_100003034(int64_t a1) {
    int64_t result = function_100002fb0(); // 0x100003048
    *(int64_t *)(result + 8) = a1;
    return result;
}

// Address range: 0x10000306c - 0x10000309c
int64_t function_10000306c(void) {
    int64_t result = function_100002fb0(); // 0x10000307c
    *(int64_t *)(result + 8) = 0;
    return result;
}

// Address range: 0x10000309c - 0x1000030cc
int64_t function_10000309c(void) {
    int64_t result = function_100002fb0(); // 0x1000030ac
    *(int64_t *)(result + 8) = 0;
    return result;
}

// Address range: 0x1000030cc - 0x1000031d0
int64_t function_1000030cc(void) {
    // 0x1000030cc
    int64_t v1; // 0x1000030cc
    if (v1 == 0) {
        // 0x1000031c4
        return 0;
    }
    // 0x1000030f4
    function_1000030cc();
    *(int64_t *)(v1 + 16) = 0;
    int64_t v2; // 0x1000030cc
    switch (*(int32_t *)&v2) {
        case 0: {
            int64_t * v3 = (int64_t *)(v1 + 8); // 0x100003124
            _free((int64_t *)*v3);
            *v3 = 0;
            // break -> 0x1000031b8
            break;
        }
        case 1: {
        }
        case 2: {
            // 0x100003168
            function_1000030cc();
            *(int64_t *)(v1 + 8) = 0;
            // break -> 0x1000031b8
            break;
        }
        default: {
            int64_t v4 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003188
            _fprintf((struct _IO_FILE *)v4, "Cannot deallocate node with tag: %d\n", v1);
            _exit(1);
            // UNREACHABLE
        }
    }
    // 0x1000031b8
    _free((int64_t *)v1);
    v2 = &g1;
    // 0x1000031c4
    return &g1;
}

// Address range: 0x1000031d0 - 0x100003314
int64_t function_1000031d0(void) {
    // 0x1000031d0
    int64_t result; // 0x1000031d0
    if (result == 0) {
        int64_t v1 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003200
        _fprintf((struct _IO_FILE *)v1, "Cannot append to uninitialized node.");
        _exit(1);
        // UNREACHABLE
    }
    if (result == 0) {
        // 0x100003308
        return result;
    }
    if ((int32_t)result >= 3) {
        int64_t v2 = *(int64_t *)*(int64_t *)0x100004010; // 0x1000032dc
        _fprintf((struct _IO_FILE *)v2, "Cannot append to node with tag: %d\n", result);
        _exit(1);
        // UNREACHABLE
    }
    int64_t v3 = *(int64_t *)(result + 8); // 0x100003264
    if (v3 == 0) {
        // 0x100003308
        return result;
    }
    int64_t v4 = v3; // 0x100003270
    v4 += 16;
    while (v4 != 0) {
        // 0x100003298
        v4 += 16;
    }
    // 0x100003308
    return result;
}

// Address range: 0x100003314 - 0x10000348c
int64_t function_100003314(void) {
    // 0x100003314
    int64_t v1; // 0x100003314
    if (v1 == 0) {
        // 0x10000347c
        return 0;
    }
    int64_t result = 1; // 0x100003314
    int64_t v2; // 0x100003314
    switch ((int32_t)v2) {
        case 1: {
            int64_t v3 = *(int64_t *)(v1 + 8);
            int64_t v4 = v3; // 0x10000339c
            if (v3 == 0) {
                // 0x10000347c
                return 0;
            }
            int64_t v5 = 0; // 0x10000339c
            v5 += function_100003314();
            v4 += 16;
            result = v5;
            while (v4 != 0) {
                // 0x1000033a4
                v5 += function_100003314();
                v4 += 16;
                result = v5;
            }
        }
        case 0: {
            // 0x10000347c
            return result;
        }
        case 2: {
            int64_t v6 = *(int64_t *)(v1 + 8);
            int64_t v7 = v6; // 0x100003410
            int64_t v8 = 1; // 0x100003410
            result = 1;
            if (v6 == 0) {
                // 0x10000347c
                return result;
            }
            v8 *= function_100003314();
            v7 += 16;
            result = v8;
            while (v7 != 0) {
                // 0x100003418
                v8 *= function_100003314();
                v7 += 16;
                result = v8;
            }
            return result;
        }
        default: {
            int64_t v9 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003450
            _fprintf((struct _IO_FILE *)v9, "Cannot count node with tag: %d\n", v1);
            _exit(1);
            // UNREACHABLE
        }
    }
}

// Address range: 0x10000348c - 0x100003630
int64_t function_10000348c(void) {
    int64_t result = 0; // 0x1000034ac
    int64_t v1; // 0x10000348c
    if (v1 == 0) {
        // 0x100003624
        return result;
    }
    int64_t v2; // 0x10000348c
    switch ((int32_t)v2) {
        case 0: {
            // 0x100003624
            return _printf((char *)*(int64_t *)(v1 + 8));
        }
        case 1: {
            int64_t v3 = function_100003314(); // 0x10000350c
            if (v1 >= v3) {
                int64_t v4; // 0x10000348c
                int64_t v5 = v4 - v3; // 0x100003544
                int64_t v6 = function_100003314(); // 0x10000350c
                v4 = v5;
                while (v5 >= v6) {
                    // 0x10000353c
                    v5 = v4 - v6;
                    v6 = function_100003314();
                    v4 = v5;
                }
            }
            // 0x100003624
            return function_10000348c();
        }
        case 2: {
            int64_t v7 = *(int64_t *)(v1 + 8);
            if (v7 == 0) {
                // 0x100003624
                return result;
            }
            int64_t v8 = v7; // 0x10000359c
            function_100003314();
            int64_t result2 = function_10000348c(); // 0x1000035d0
            v8 += 16;
            while (v8 != 0) {
                // 0x1000035a4
                function_100003314();
                result2 = function_10000348c();
                v8 += 16;
            }
            // 0x100003624
            return result2;
        }
    }
    int64_t v9 = *(int64_t *)*(int64_t *)0x100004010; // 0x1000035f0
    _fprintf((struct _IO_FILE *)v9, "Cannot expand node with tag: %d\n", v1);
    _exit(1);
    // UNREACHABLE
}

// Address range: 0x100003630 - 0x1000036b4
int64_t function_100003630(void) {
    // 0x100003630
    int64_t v1; // 0x100003630
    int64_t * v2 = _calloc(_strlen((char *)v1) + 1, 1); // 0x100003658
    if (v2 != NULL) {
        int64_t result = (int64_t)v2; // 0x100003658
        ___strcpy_chk(result, v1, -1);
        return result;
    }
    int64_t v3 = *(int64_t *)*(int64_t *)0x100004010; // 0x10000367c
    _fprintf((struct _IO_FILE *)v3, "Failed to allocate a copy of the string.");
    _exit(1);
    // UNREACHABLE
}

// Address range: 0x1000036b4 - 0x100003a5c
int64_t function_1000036b4(void) {
    int64_t result = function_10000306c(); // 0x1000036dc
    int64_t v1; // bp-168, 0x1000036b4
    _memset(&v1, 0, 128);
    int64_t v2; // 0x1000036b4
    char * v3 = (char *)v2; // 0x100003714
    if (*v3 != 0) {
        int64_t * v4 = (int64_t *)v2; // 0x100003738
        int64_t v5 = &v1;
        int64_t v6 = 0;
        int64_t v7 = 0;
        int32_t v8 = 0;
        int64_t v9 = 0;
        int64_t v10 = v9 + 1; // 0x100003734
        *v4 = v10;
        char v11 = *v3; // 0x100003740
        int64_t v12; // 0x1000036b4
        int64_t v13; // 0x1000036b4
        int32_t v14; // 0x1000036b4
        int64_t v15; // 0x1000039e4
        char v16; // 0x100003774
        int64_t v17; // 0x1000037fc
        int64_t v18; // 0x1000036b4
        int64_t v19; // 0x1000037bc
        int64_t v20; // 0x100003870
        int64_t v21; // 0x1000039b0
        int64_t v22; // 0x10000397c
        int64_t v23; // 0x100003938
        int64_t v24; // 0x1000036b4
        switch (v11) {
            case 92: {
                // 0x10000375c
                *v4 = v10;
                v16 = *v3;
                if (v16 == 0) {
                    // break -> 0x100003a1c
                    break;
                }
                // 0x100003794
                v18 = v6 + v5;
                *(char *)v18 = 92;
                v19 = v6 + 2;
                *(char *)(v18 + 1) = v16;
                *(char *)(v19 + v5) = 0;
                v12 = v19;
                v13 = v7;
                v14 = v8;
                v24 = v9;
                // break -> 0x100003a18
                break;
            }
            case 123: {
                // 0x1000037f4
                v17 = v6 + 1;
                *(char *)(v6 + v5) = 123;
                *(char *)(v17 + v5) = 0;
                v12 = v17;
                v13 = v7 + 1;
                v14 = 1;
                v24 = v9;
                // break -> 0x100003a18
                break;
            }
            case 125: {
                if (v7 == 0) {
                    if (v8 % 2 == 0) {
                        // 0x1000038c8
                        function_100003034(function_100003630());
                        function_1000031d0();
                        goto lab_0x100003a1c;
                    } else {
                        // 0x1000038a4
                        function_100003a5c();
                        function_1000031d0();
                        goto lab_0x100003a1c;
                    }
                }
                // 0x100003868
                v20 = v6 + 1;
                *(char *)(v6 + v5) = 125;
                *(char *)(v20 + v5) = 0;
                v12 = v20;
                v13 = v7 - 1;
                v14 = v8;
                v24 = v9;
                // break -> 0x100003a18
                break;
            }
            case 44: {
                if (v7 == 0) {
                    if (v8 % 2 == 0) {
                        // 0x100003968
                        v22 = function_100003034(function_100003630());
                        function_1000031d0();
                        *(char *)&v1 = 0;
                        v12 = 0;
                        v13 = 0;
                        v14 = v8;
                        v24 = v22;
                    } else {
                        // 0x100003928
                        v23 = function_100003a5c();
                        function_1000031d0();
                        *(char *)&v1 = 0;
                        v12 = 0;
                        v13 = 0;
                        v14 = 0;
                        v24 = v23;
                    }
                } else {
                    // 0x1000039a8
                    v21 = v6 + 1;
                    *(char *)(v6 + v5) = 44;
                    *(char *)(v21 + v5) = 0;
                    v12 = v21;
                    v13 = v7;
                    v14 = v8;
                    v24 = v9;
                }
                // break -> 0x100003a18
                break;
            }
            default: {
                // 0x1000039dc
                v15 = v6 + 1;
                *(char *)(v6 + v5) = v11;
                *(char *)(v15 + v5) = 0;
                v12 = v15;
                v13 = v7;
                v14 = v8;
                v24 = v9;
                // break -> 0x100003a18
                break;
            }
        }
        int64_t v25 = v24;
        char * v26 = (char *)(v25 + v2); // 0x100003714
        while (*v26 != 0) {
            // 0x100003728
            v6 = v12;
            v7 = v13;
            v8 = v14;
            v9 = v25;
            char * v27 = v26;
            v10 = v9 + 1;
            *v4 = v10;
            v11 = *v27;
            switch (v11) {
                case 92: {
                    // 0x10000375c
                    *v4 = v10;
                    v16 = *v27;
                    if (v16 == 0) {
                        // break -> 0x100003a1c
                        break;
                    }
                    // 0x100003794
                    v18 = v6 + v5;
                    *(char *)v18 = 92;
                    v19 = v6 + 2;
                    *(char *)(v18 + 1) = v16;
                    *(char *)(v19 + v5) = 0;
                    v12 = v19;
                    v13 = v7;
                    v14 = v8;
                    v24 = v9;
                    // break -> 0x100003a18
                    break;
                }
                case 123: {
                    // 0x1000037f4
                    v17 = v6 + 1;
                    *(char *)(v6 + v5) = 123;
                    *(char *)(v17 + v5) = 0;
                    v12 = v17;
                    v13 = v7 + 1;
                    v14 = 1;
                    v24 = v9;
                    // break -> 0x100003a18
                    break;
                }
                case 125: {
                    if (v7 == 0) {
                        if (v8 % 2 == 0) {
                            // 0x1000038c8
                            function_100003034(function_100003630());
                            function_1000031d0();
                            goto lab_0x100003a1c;
                        } else {
                            // 0x1000038a4
                            function_100003a5c();
                            function_1000031d0();
                            goto lab_0x100003a1c;
                        }
                    }
                    // 0x100003868
                    v20 = v6 + 1;
                    *(char *)(v6 + v5) = 125;
                    *(char *)(v20 + v5) = 0;
                    v12 = v20;
                    v13 = v7 - 1;
                    v14 = v8;
                    v24 = v9;
                    // break -> 0x100003a18
                    break;
                }
                case 44: {
                    if (v7 == 0) {
                        if (v8 % 2 == 0) {
                            // 0x100003968
                            v22 = function_100003034(function_100003630());
                            function_1000031d0();
                            *(char *)&v1 = 0;
                            v12 = 0;
                            v13 = 0;
                            v14 = v8;
                            v24 = v22;
                        } else {
                            // 0x100003928
                            v23 = function_100003a5c();
                            function_1000031d0();
                            *(char *)&v1 = 0;
                            v12 = 0;
                            v13 = 0;
                            v14 = 0;
                            v24 = v23;
                        }
                    } else {
                        // 0x1000039a8
                        v21 = v6 + 1;
                        *(char *)(v6 + v5) = 44;
                        *(char *)(v21 + v5) = 0;
                        v12 = v21;
                        v13 = v7;
                        v14 = v8;
                        v24 = v9;
                    }
                    // break -> 0x100003a18
                    break;
                }
                default: {
                    // 0x1000039dc
                    v15 = v6 + 1;
                    *(char *)(v6 + v5) = v11;
                    *(char *)(v15 + v5) = 0;
                    v12 = v15;
                    v13 = v7;
                    v14 = v8;
                    v24 = v9;
                    // break -> 0x100003a18
                    break;
                }
            }
            // 0x100003a18
            v25 = v24;
            v26 = (char *)(v25 + v2);
        }
    }
    goto lab_0x100003a1c;
  lab_0x100003a1c:;
    int64_t v28 = *(int64_t *)0x100004008; // 0x100003a2c
    if (*(int64_t *)v28 != *(int64_t *)*(int64_t *)0x100004008) {
        // 0x100003a44
        ___stack_chk_fail();
    }
    // 0x100003a48
    return result;
}

// Address range: 0x100003a5c - 0x100003ca4
int64_t function_100003a5c(void) {
    int64_t result = function_10000309c(); // 0x100003a80
    int64_t v1; // bp-152, 0x100003a5c
    _memset(&v1, 0, 128);
    int64_t v2; // 0x100003a5c
    char * v3 = (char *)v2; // 0x100003aac
    if (*v3 != 0) {
        int64_t * v4 = (int64_t *)v2; // 0x100003ad0
        int64_t v5 = &v1;
        int64_t v6 = 0;
        int64_t v7 = 0;
        int64_t v8 = v7 + 1; // 0x100003acc
        *v4 = v8;
        char v9 = *v3; // 0x100003ad8
        int64_t v10; // 0x100003a5c
        int64_t v11; // 0x100003be8
        char v12; // 0x100003b0c
        int64_t v13; // 0x100003b78
        int64_t v14; // 0x100003b34
        int64_t v15; // 0x100003a5c
        switch (v9) {
            case 92: {
                // 0x100003af4
                *v4 = v8;
                v12 = *v3;
                if (v12 == 0) {
                    // break -> 0x100003c18
                    break;
                }
                // 0x100003b2c
                v14 = v6 + 1;
                *(char *)(v6 + v5) = v12;
                *(char *)(v14 + v5) = 0;
                v10 = v14;
                v15 = v7;
                // break -> 0x100003c14
                break;
            }
            case 123: {
                // 0x100003b70
                v13 = function_1000036b4();
                if (v6 != 0) {
                    // 0x100003b94
                    function_100003034(function_100003630());
                    function_1000031d0();
                    *(char *)&v1 = 0;
                }
                // 0x100003bd0
                function_1000031d0();
                v10 = 0;
                v15 = v13;
                // break -> 0x100003c14
                break;
            }
            default: {
                // 0x100003be0
                v11 = v6 + 1;
                *(char *)(v6 + v5) = v9;
                *(char *)(v11 + v5) = 0;
                v10 = v11;
                v15 = v7;
                // break -> 0x100003c14
                break;
            }
        }
        int64_t v16 = v15;
        int64_t v17 = v10;
        char * v18 = (char *)(v16 + v2); // 0x100003aac
        while (*v18 != 0) {
            // 0x100003ac0
            v6 = v17;
            v7 = v16;
            char * v19 = v18;
            v8 = v7 + 1;
            *v4 = v8;
            v9 = *v19;
            switch (v9) {
                case 92: {
                    // 0x100003af4
                    *v4 = v8;
                    v12 = *v19;
                    if (v12 == 0) {
                        // break -> 0x100003c18
                        break;
                    }
                    // 0x100003b2c
                    v14 = v6 + 1;
                    *(char *)(v6 + v5) = v12;
                    *(char *)(v14 + v5) = 0;
                    v10 = v14;
                    v15 = v7;
                    // break -> 0x100003c14
                    break;
                }
                case 123: {
                    // 0x100003b70
                    v13 = function_1000036b4();
                    if (v6 != 0) {
                        // 0x100003b94
                        function_100003034(function_100003630());
                        function_1000031d0();
                        *(char *)&v1 = 0;
                    }
                    // 0x100003bd0
                    function_1000031d0();
                    v10 = 0;
                    v15 = v13;
                    // break -> 0x100003c14
                    break;
                }
                default: {
                    // 0x100003be0
                    v11 = v6 + 1;
                    *(char *)(v6 + v5) = v9;
                    *(char *)(v11 + v5) = 0;
                    v10 = v11;
                    v15 = v7;
                    // break -> 0x100003c14
                    break;
                }
            }
            // 0x100003c14
            v16 = v15;
            v17 = v10;
            v18 = (char *)(v16 + v2);
        }
        // 0x100003c18
        if (v17 != 0) {
            // 0x100003c2c
            function_100003034(function_100003630());
            function_1000031d0();
            *(char *)&v1 = 0;
        }
    }
    int64_t v20 = *(int64_t *)0x100004008; // 0x100003c78
    if (*(int64_t *)v20 != *(int64_t *)*(int64_t *)0x100004008) {
        // 0x100003c90
        ___stack_chk_fail();
    }
    // 0x100003c94
    return result;
}

// Address range: 0x100003ca4 - 0x100003d58
int64_t function_100003ca4(void) {
    int64_t v1 = 0; // bp-32, 0x100003cb8
    function_100003a5c();
    int64_t v2 = function_100003314(); // 0x100003ccc
    _printf("Pattern: %s\n", &v1);
    int64_t v3 = 0; // 0x100003d04
    if (v2 == 0) {
        // 0x100003d38
        _printf("\n");
        return function_1000030cc();
    }
    function_10000348c();
    _printf("\n");
    v3++;
    while (v3 != v2) {
        // 0x100003d0c
        function_10000348c();
        _printf("\n");
        v3++;
    }
    // 0x100003d38
    _printf("\n");
    return function_1000030cc();
}

// Address range: 0x100003d58 - 0x100003da4
int64_t entry_point(void) {
    // 0x100003d58
    function_100003ca4();
    function_100003ca4();
    function_100003ca4();
    return 0;
}

// Address range: 0x100003da4 - 0x100003db0
int64_t function_100003da4(void) {
    // 0x100003da4
    return ___stack_chk_fail();
}

// Address range: 0x100003db0 - 0x100003dbc
int64_t function_100003db0(int64_t a1, int64_t a2, int64_t a3) {
    // 0x100003db0
    return ___strcpy_chk(a1, a2, a3);
}

// Address range: 0x100003dbc - 0x100003dc8
int64_t * function_100003dbc(int32_t nmemb, int32_t size) {
    // 0x100003dbc
    return _calloc(nmemb, size);
}

// Address range: 0x100003dc8 - 0x100003dd4
void function_100003dc8(int32_t status) {
    // 0x100003dc8
    _exit(status);
}

// Address range: 0x100003dd4 - 0x100003de0
int32_t function_100003dd4(struct _IO_FILE * stream, char * format, ...) {
    // 0x100003dd4
    return _fprintf(stream, format);
}

// Address range: 0x100003de0 - 0x100003dec
void function_100003de0(int64_t * ptr) {
    // 0x100003de0
    _free(ptr);
}

// Address range: 0x100003dec - 0x100003df8
int64_t * function_100003dec(int32_t size) {
    // 0x100003dec
    return _malloc(size);
}

// Address range: 0x100003df8 - 0x100003e04
int64_t * function_100003df8(int64_t * s, int32_t c, int32_t n) {
    // 0x100003df8
    return _memset(s, c, n);
}

// Address range: 0x100003e04 - 0x100003e10
int32_t function_100003e04(char * format, ...) {
    // 0x100003e04
    return _printf(format);
}

// Address range: 0x100003e10 - 0x100003e1c
int32_t function_100003e10(char * s) {
    // 0x100003e10
    return _strlen(s);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 23

