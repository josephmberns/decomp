//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <ctype.h>
#include <stdint.h>
#include <stdlib.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_1000038f0(void);
int64_t function_100003988(void);
int64_t function_100003aa4(int64_t a1, int64_t a2, int64_t a3, int64_t a4);
int64_t function_100003d64(int64_t a1, int64_t a2, int64_t a3, char * a4);
int64_t function_100003d70(int64_t a1);
int64_t function_100003d7c(int64_t a1, int64_t a2, int64_t a3);
int32_t function_100003d88(char * nptr);
char * function_100003d94(char * s, int32_t n, struct _IO_FILE * stream);
int32_t function_100003da0(struct _IO_FILE * stream, char * format, ...);
int32_t function_100003dac(char * s);
char * function_100003db8(char * s, int32_t c);
int32_t function_100003dc4(char * s);
int32_t function_100003dd0(char * s, char * accept);
int32_t function_100003ddc(int32_t c);

// --------------------- Global Variables ---------------------

int64_t g1 = 0x100000000081fa; // 0x100008000
char * g2 = "\xe8="; // 0x100008010
int64_t g3 = 0x100000cfeedfacf; // 0x1000081c8
int64_t g4 = 0; // 0x1000081fa
int64_t g5 = 0x1900000000; // 0x10000822c
int64_t g6 = 0x4000000000010000; // 0x10000824a

// ------- Dynamically Linked Functions Without Header --------

int64_t ___chkstk_darwin(void);
int64_t ___sprintf_chk(int64_t a1, int64_t a2, int64_t a3, char * a4);
int64_t ___stack_chk_fail(int64_t a1);
int64_t ___strcat_chk(int64_t a1, int64_t a2, int64_t a3);
int32_t _atoi(char * a1);
char * _fgets(char * a1, int32_t a2, struct _IO_FILE * a3);
int32_t _fprintf(struct _IO_FILE * a1, char * a2, ...);
int32_t _puts(char * a1);
char * _strchr(char * a1, int32_t a2);
int32_t _strlen(char * a1);
int32_t _strspn(char * a1, char * a2);

// ------------------------ Functions -------------------------

// Address range: 0x1000038f0 - 0x100003988
int64_t function_1000038f0(void) {
    // 0x1000038f0
    int64_t v1; // 0x1000038f0
    char v2 = *(char *)v1; // 0x10000390c
    if (v2 == 0) {
        // 0x100003968
        return ___strcat_chk(v1, (int64_t)&g5, -1);
    }
    int64_t v3 = *(int64_t *)(8 * (int64_t)(v2 == 51) + (int64_t)&g1); // 0x100003948
    ___strcat_chk(v1, v3, -1);
    int64_t v4; // 0x1000038f0
    int64_t v5 = v4 + 1; // 0x10000395c
    char v6 = *(char *)v5; // 0x10000390c
    while (v6 != 0) {
        // 0x100003920
        v3 = *(int64_t *)(8 * (int64_t)(v6 == 51) + (int64_t)&g1);
        ___strcat_chk(v1, v3, -1);
        v5++;
        v6 = *(char *)v5;
    }
    // 0x100003968
    return ___strcat_chk(v1, (int64_t)&g5, -1);
}

// Address range: 0x100003988 - 0x100003a84
int64_t function_100003988(void) {
    // 0x100003988
    int64_t result; // 0x100003988
    ___sprintf_chk(result, 0, -1, "beep");
    char c = *(char *)result; // 0x1000039bc
    if (c == 0) {
        // 0x100003a60
        ___strcat_chk(result, (int64_t)&g6, -1);
        return result;
    }
    if (_strchr(g2, _toupper((int32_t)c)) == NULL) {
        // 0x100003a0c
        ___strcat_chk(result, (int64_t)&g6, -1);
    } else {
        // 0x100003a24
        function_1000038f0();
    }
    // 0x100003a50
    int64_t v1; // 0x100003988
    int64_t v2 = v1 + 1; // 0x100003a54
    char c2 = *(char *)v2; // 0x1000039bc
    while (c2 != 0) {
        // 0x1000039d0
        if (_strchr(g2, _toupper((int32_t)c2)) == NULL) {
            // 0x100003a0c
            ___strcat_chk(result, (int64_t)&g6, -1);
        } else {
            // 0x100003a24
            function_1000038f0();
        }
        // 0x100003a50
        v2++;
        c2 = *(char *)v2;
    }
    // 0x100003a60
    ___strcat_chk(result, (int64_t)&g6, -1);
    return result;
}

// Address range: 0x100003a84 - 0x100003aa4
int64_t entry_point(void) {
    // 0x100003a84
    return ___chkstk_darwin();
}

// Address range: 0x100003aa4 - 0x100003d64
int64_t function_100003aa4(int64_t a1, int64_t a2, int64_t a3, int64_t a4) {
    // 0x100003aa4
    int64_t v1; // 0x100003aa4
    int64_t * v2 = (int64_t *)(v1 - 24); // 0x100003ab8
    *v2 = *(int64_t *)*(int64_t *)0x100004018;
    int32_t v3 = v1; // 0x100003ac0
    int32_t v4 = 1 - v3; // 0x100003ad8
    int64_t v5; // 0x100003aa4
    if (v4 < 0 == (v4 & v3) < 0) {
        goto lab_0x100003be8;
    } else {
        int64_t * v6 = (int64_t *)(v1 + 8); // 0x100003aec
        if (_strlen((char *)*v6) == _strspn((char *)*v6, "0123456789")) {
            int32_t v7 = _atoi((char *)*v6); // 0x100003b70
            int32_t v8 = 1 - v7; // 0x100003b78
            if (v8 < 0 != (v8 & v7) < 0) {
                int32_t v9 = _atoi((char *)*v6); // 0x100003b90
                if (v9 < 1000 != (999 - v9 & v9) < 0) {
                    // 0x100003ba4
                    _atoi((char *)*v6);
                }
            }
            goto lab_0x100003be8;
        } else {
            int64_t v10 = *(int64_t *)*(int64_t *)0x100004020; // 0x100003b2c
            v5 = _fprintf((struct _IO_FILE *)v10, "use: %s [duration]   dit in ms, default %d\n", (char *)v1, v1);
            goto lab_0x100003d20;
        }
    }
  lab_0x100003be8:
    // 0x100003be8
    ___sprintf_chk((int64_t)&g3, 0, 50, " -n -f 440 -l %d -D %d");
    ___sprintf_chk((int64_t)&g4, 0, 50, " -n -f 440 -l %d -D %d");
    ___sprintf_chk((int64_t)&g5, 0, 30, " -n -D %d");
    ___sprintf_chk((int64_t)&g6, 0, 30, " -n -D %d");
    char * v11 = (char *)(v1 - 97); // 0x100003cec
    v5 = 0;
    if (_fgets(v11, 72, (struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004028) != NULL) {
        _puts((char *)function_100003988());
        v5 = 0;
        while (_fgets(v11, 72, (struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004028) != NULL) {
            // 0x100003d04
            _puts((char *)function_100003988());
            v5 = 0;
        }
    }
    goto lab_0x100003d20;
  lab_0x100003d20:
    // 0x100003d20
    if (*(int64_t *)*(int64_t *)0x100004018 != *v2) {
        // 0x100003d48
        ___stack_chk_fail(v5);
    }
    // 0x100003d4c
    return 0;
}

// Address range: 0x100003d64 - 0x100003d70
int64_t function_100003d64(int64_t a1, int64_t a2, int64_t a3, char * a4) {
    // 0x100003d64
    return ___sprintf_chk(a1, a2, a3, a4);
}

// Address range: 0x100003d70 - 0x100003d7c
int64_t function_100003d70(int64_t a1) {
    // 0x100003d70
    return ___stack_chk_fail(a1);
}

// Address range: 0x100003d7c - 0x100003d88
int64_t function_100003d7c(int64_t a1, int64_t a2, int64_t a3) {
    // 0x100003d7c
    return ___strcat_chk(a1, a2, a3);
}

// Address range: 0x100003d88 - 0x100003d94
int32_t function_100003d88(char * nptr) {
    // 0x100003d88
    return _atoi(nptr);
}

// Address range: 0x100003d94 - 0x100003da0
char * function_100003d94(char * s, int32_t n, struct _IO_FILE * stream) {
    // 0x100003d94
    return _fgets(s, n, stream);
}

// Address range: 0x100003da0 - 0x100003dac
int32_t function_100003da0(struct _IO_FILE * stream, char * format, ...) {
    // 0x100003da0
    return _fprintf(stream, format);
}

// Address range: 0x100003dac - 0x100003db8
int32_t function_100003dac(char * s) {
    // 0x100003dac
    return _puts(s);
}

// Address range: 0x100003db8 - 0x100003dc4
char * function_100003db8(char * s, int32_t c) {
    // 0x100003db8
    return _strchr(s, c);
}

// Address range: 0x100003dc4 - 0x100003dd0
int32_t function_100003dc4(char * s) {
    // 0x100003dc4
    return _strlen(s);
}

// Address range: 0x100003dd0 - 0x100003ddc
int32_t function_100003dd0(char * s, char * accept) {
    // 0x100003dd0
    return _strspn(s, accept);
}

// Address range: 0x100003ddc - 0x100003de8
int32_t function_100003ddc(int32_t c) {
    // 0x100003ddc
    return _toupper(c);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 15

