//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003878(void);
int64_t function_100003928(void);
int64_t function_100003b6c(void);
int64_t function_100003cf8(void);
int64_t function_100003e6c(int64_t * a1, int64_t a2, int64_t a3, char * a4);
int64_t function_100003e78(int64_t a1);
int32_t function_100003e84(struct _IO_FILE * stream);
int64_t * function_100003e90(int64_t * s, int32_t c, int32_t n);
int32_t function_100003e9c(char * format, ...);
int32_t function_100003ea8(int32_t * newthread, int64_t * attr, int64_t * (*start_routine)(int64_t *), int64_t * arg);
int32_t function_100003eb4(int32_t th, int64_t ** thread_return);
int32_t function_100003ec0(int64_t * mutex, int64_t * mutexattr);
int32_t function_100003ecc(int64_t * mutex);
int32_t function_100003ed8(int64_t * mutex);
int32_t function_100003ee4(void);
int32_t function_100003ef0(int32_t seconds);
int32_t function_100003efc(int32_t useconds);
int32_t function_100003f08(char * format, int64_t arg);

// --------------------- Global Variables ---------------------

char * g1 = "\x1b[%d;%dH"; // 0x100003f65
int64_t g2 = 0x32aaaba7; // 0x100008050
int64_t g3 = 0x100000cfeedfacf; // 0x100008090

// ------- Dynamically Linked Functions Without Header --------

int64_t ___sprintf_chk(int64_t * a1, int64_t a2, int64_t a3, char * a4);
int64_t ___stack_chk_fail(int64_t a1);
int32_t _fflush(struct _IO_FILE * a1);
int64_t * _memset(int64_t * a1, int32_t a2, int32_t a3);
int32_t _printf(char * a1, ...);
int32_t _pthread_create(int32_t * a1, int64_t * a2, int64_t * (*a3)(int64_t *), int64_t * a4);
int32_t _pthread_join(int32_t a1, int64_t ** a2);
int32_t _pthread_mutex_init(int64_t * a1, int64_t * a2);
int32_t _pthread_mutex_lock(int64_t * a1);
int32_t _pthread_mutex_unlock(int64_t * a1);
int32_t _rand(void);
int32_t _usleep(int32_t a1);
int32_t _vprintf(char * a1, int64_t a2);

// ------------------------ Functions -------------------------

// Address range: 0x100003878 - 0x100003928
int64_t function_100003878(void) {
    // 0x100003878
    _pthread_mutex_lock(&g2);
    _printf((char *)&g1);
    int64_t v1; // 0x100003878
    int64_t v2; // 0x100003878
    _vprintf((char *)v2, (int64_t)&v1);
    _printf((char *)&g1);
    _fflush((struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004018);
    return _pthread_mutex_unlock(&g2);
}

// Address range: 0x100003928 - 0x100003b6c
int64_t function_100003928(void) {
    // 0x100003928
    int64_t v1; // 0x100003928
    int64_t v2 = v1;
    int64_t v3 = *(int64_t *)*(int64_t *)0x100004010; // 0x10000393c
    int64_t v4; // bp-32, 0x100003928
    int64_t v5 = &v4; // 0x10000394c
    v4 = 0x100000000 * v2 >> 32;
    *(int32_t *)(4 * v2 & 4 | v5) = ((int32_t)v2 + 1) % 5;
    function_100003878();
    function_100003878();
    for (int64_t i = 0; i < 2; i++) {
        int32_t v6 = *(int32_t *)(4 * i + v5); // 0x1000039cc
        _pthread_mutex_lock((int64_t *)(64 * (int64_t)v6 + (int64_t)&g3));
        if (i == 0) {
            // 0x1000039f4
            function_100003878();
        }
        // 0x100003a0c
        function_100003878();
        _sleep(1);
    }
    int32_t v7 = _rand(); // 0x100003a80
    int32_t v8 = v7 - 8 * v7 / 8; // 0x100003a90
    int32_t v9 = v8 + 3; // 0x100003a94
    int32_t v10 = -3 - v8; // 0x100003aa8
    int32_t v11 = 0; // 0x100003ab0
    if (v10 < 0 != (v10 & v9) < 0) {
        function_100003878();
        _sleep(1);
        v11++;
        while (v11 - v9 < 0 != ((v11 - v9 ^ v11) & (v11 ^ v9)) < 0) {
            // 0x100003ab8
            function_100003878();
            _sleep(1);
            v11++;
        }
    }
    int32_t v12; // 0x100003b24
    for (int64_t i = 0; i < 2; i++) {
        int32_t v13 = *(int32_t *)(4 * i + v5); // 0x100003b14
        v12 = _pthread_mutex_unlock((int64_t *)(64 * (int64_t)v13 + (int64_t)&g3));
    }
    int64_t v14 = v12;
    int64_t result = v14; // 0x100003b54
    if (*(int64_t *)*(int64_t *)0x100004010 != v3) {
        // 0x100003b5c
        result = ___stack_chk_fail(v14);
    }
    // 0x100003b60
    return result;
}

// Address range: 0x100003b6c - 0x100003cf8
int64_t function_100003b6c(void) {
    // 0x100003b6c
    int64_t v1; // bp-88, 0x100003b6c
    _memset(&v1, 0, 64);
    function_100003878();
    int32_t v2 = _rand(); // 0x100003bb4
    ___sprintf_chk(&v1, 0, 64, "..oO (%s)");
    int32_t v3; // 0x100003b6c
    int32_t v4; // 0x100003c7c
    if (*(char *)&v1 != 0) {
        v3 = 0;
        function_100003878();
        if (v3 < 5 != (4 - v3 & v3) < 0) {
            // 0x100003c64
            _usleep(0x30d40);
        }
        // 0x100003c78
        v4 = v3 + 1;
        while (*(char *)((int64_t)v4 + (int64_t)&v1) != 0) {
            // 0x100003c20
            v3 = v4;
            function_100003878();
            if (v3 < 5 != (4 - v3 & v3) < 0) {
                // 0x100003c64
                _usleep(0x30d40);
            }
            // 0x100003c78
            v4 = v3 + 1;
        }
    }
    int32_t v5 = _usleep(_rand() % 0xf4240 + 0x7a120); // 0x100003cac
    while (v2 % 5 != 0) {
        // 0x100003ba0
        function_100003878();
        v2 = _rand();
        ___sprintf_chk(&v1, 0, 64, "..oO (%s)");
        if (*(char *)&v1 != 0) {
            v3 = 0;
            function_100003878();
            if (v3 < 5 != (4 - v3 & v3) < 0) {
                // 0x100003c64
                _usleep(0x30d40);
            }
            // 0x100003c78
            v4 = v3 + 1;
            while (*(char *)((int64_t)v4 + (int64_t)&v1) != 0) {
                // 0x100003c20
                v3 = v4;
                function_100003878();
                if (v3 < 5 != (4 - v3 & v3) < 0) {
                    // 0x100003c64
                    _usleep(0x30d40);
                }
                // 0x100003c78
                v4 = v3 + 1;
            }
        }
        // 0x100003c88
        v5 = _usleep(_rand() % 0xf4240 + 0x7a120);
    }
    int64_t v6 = v5; // 0x100003cac
    int64_t v7 = *(int64_t *)0x100004010; // 0x100003cd0
    int64_t result = v6; // 0x100003ce0
    if (*(int64_t *)v7 != *(int64_t *)*(int64_t *)0x100004010) {
        // 0x100003ce8
        result = ___stack_chk_fail(v6);
    }
    // 0x100003cec
    return result;
}

// Address range: 0x100003cf8 - 0x100003d58
int64_t function_100003cf8(void) {
    // 0x100003cf8
    function_100003878();
    while (true) {
        // 0x100003d44
        function_100003b6c();
        function_100003928();
    }
}

// Address range: 0x100003d58 - 0x100003e6c
int64_t entry_point(void) {
    // 0x100003d58
    int64_t v1; // bp-44, 0x100003d58
    int64_t v2 = &v1;
    int64_t v3 = 0;
    *(int32_t *)(4 * v3 + v2) = (int32_t)v3;
    _pthread_mutex_init((int64_t *)(64 * v3 + (int64_t)&g3), NULL);
    int64_t v4 = v3 + 1;
    while (v4 != 5) {
        // 0x100003d94
        v3 = v4;
        *(int32_t *)(4 * v3 + v2) = (int32_t)v3;
        _pthread_mutex_init((int64_t *)(64 * v3 + (int64_t)&g3), NULL);
        v4 = v3 + 1;
    }
    // 0x100003dd8
    int32_t v5; // bp-88, 0x100003d58
    int64_t v6 = &v5; // 0x100003df0
    int64_t v7 = 0;
    _pthread_create((int32_t *)(8 * v7 + v6), NULL, (int64_t * (*)(int64_t *))0x100003cf8, (int64_t *)(4 * v7 + v2));
    int64_t v8 = v7 + 1;
    while (v8 != 5) {
        // 0x100003dec
        v7 = v8;
        _pthread_create((int32_t *)(8 * v7 + v6), NULL, (int64_t * (*)(int64_t *))0x100003cf8, (int64_t *)(4 * v7 + v2));
        v8 = v7 + 1;
    }
    int32_t result = _pthread_join(v5, NULL); // 0x100003e30
    int64_t v9 = *(int64_t *)*(int64_t *)0x100004010; // 0x100003e44
    if (v9 != *(int64_t *)*(int64_t *)0x100004010) {
        // 0x100003e58
        ___stack_chk_fail((int64_t)result);
    }
    // 0x100003e5c
    return result;
}

// Address range: 0x100003e6c - 0x100003e78
int64_t function_100003e6c(int64_t * a1, int64_t a2, int64_t a3, char * a4) {
    // 0x100003e6c
    return ___sprintf_chk(a1, a2, a3, a4);
}

// Address range: 0x100003e78 - 0x100003e84
int64_t function_100003e78(int64_t a1) {
    // 0x100003e78
    return ___stack_chk_fail(a1);
}

// Address range: 0x100003e84 - 0x100003e90
int32_t function_100003e84(struct _IO_FILE * stream) {
    // 0x100003e84
    return _fflush(stream);
}

// Address range: 0x100003e90 - 0x100003e9c
int64_t * function_100003e90(int64_t * s, int32_t c, int32_t n) {
    // 0x100003e90
    return _memset(s, c, n);
}

// Address range: 0x100003e9c - 0x100003ea8
int32_t function_100003e9c(char * format, ...) {
    // 0x100003e9c
    return _printf(format);
}

// Address range: 0x100003ea8 - 0x100003eb4
int32_t function_100003ea8(int32_t * newthread, int64_t * attr, int64_t * (*start_routine)(int64_t *), int64_t * arg) {
    // 0x100003ea8
    return _pthread_create(newthread, attr, start_routine, arg);
}

// Address range: 0x100003eb4 - 0x100003ec0
int32_t function_100003eb4(int32_t th, int64_t ** thread_return) {
    // 0x100003eb4
    return _pthread_join(th, thread_return);
}

// Address range: 0x100003ec0 - 0x100003ecc
int32_t function_100003ec0(int64_t * mutex, int64_t * mutexattr) {
    // 0x100003ec0
    return _pthread_mutex_init(mutex, mutexattr);
}

// Address range: 0x100003ecc - 0x100003ed8
int32_t function_100003ecc(int64_t * mutex) {
    // 0x100003ecc
    return _pthread_mutex_lock(mutex);
}

// Address range: 0x100003ed8 - 0x100003ee4
int32_t function_100003ed8(int64_t * mutex) {
    // 0x100003ed8
    return _pthread_mutex_unlock(mutex);
}

// Address range: 0x100003ee4 - 0x100003ef0
int32_t function_100003ee4(void) {
    // 0x100003ee4
    return _rand();
}

// Address range: 0x100003ef0 - 0x100003efc
int32_t function_100003ef0(int32_t seconds) {
    // 0x100003ef0
    return _sleep(seconds);
}

// Address range: 0x100003efc - 0x100003f08
int32_t function_100003efc(int32_t useconds) {
    // 0x100003efc
    return _usleep(useconds);
}

// Address range: 0x100003f08 - 0x100003f14
int32_t function_100003f08(char * format, int64_t arg) {
    // 0x100003f08
    return _vprintf(format, arg);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 19

