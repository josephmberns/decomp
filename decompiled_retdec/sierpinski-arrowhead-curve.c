//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdlib.h>

// ---------------- Integer Types Definitions -----------------

typedef int64_t int128_t;

// ----------------- Float Types Definitions ------------------

typedef double float64_t;

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003a58(void);
int64_t function_100003a94(void);
int64_t function_100003b64(void);
int64_t function_100003c58(void);
float64_t function_100003e58(float64_t a1);
int32_t function_100003e64(struct _IO_FILE * stream);
struct _IO_FILE * function_100003e70(char * filename, char * modes);
int32_t function_100003e7c(struct _IO_FILE * stream, char * format, ...);
void function_100003e88(char * s);
float64_t function_100003e94(float64_t a1);

// --------------------- Global Variables ---------------------

float64_t g1 = 180.0; // 0x100003ea0
float64_t g2 = 3.1415926535897931; // 0x100003ea8

// ------- Dynamically Linked Functions Without Header --------

float64_t _cos(float64_t a1);
int32_t _fclose(struct _IO_FILE * a1);
struct _IO_FILE * _fopen(char * a1, char * a2);
int32_t _fprintf(struct _IO_FILE * a1, char * a2, ...);
void _perror(char * a1);
float64_t _sin(float64_t a1);

// ------------------------ Functions -------------------------

// Address range: 0x100003a58 - 0x100003a94
int64_t function_100003a58(void) {
    // 0x100003a58
    int64_t result; // 0x100003a58
    int32_t * v1 = (int32_t *)(result + 16); // 0x100003a68
    *v1 = (*v1 + (int32_t)result) % 360;
    return result;
}

// Address range: 0x100003a94 - 0x100003b64
int64_t function_100003a94(void) {
    // 0x100003a94
    int64_t v1; // 0x100003a94
    int64_t v2 = v1;
    float64_t v3; // 0x100003a94
    float64_t v4 = v3;
    float64_t v5 = _cos((float64_t)(int64_t)__asm_sshll(0.0f, 0)); // 0x100003ae8
    float64_t v6 = v4 * v4 * g2 / g1; // 0x100003afc
    *(float64_t *)v2 = v6 + (float64_t)v2;
    float64_t v7 = _sin(v5); // 0x100003b10
    float64_t * v8 = (float64_t *)(v2 + 8); // 0x100003b20
    *v8 = v6 + *v8;
    int128_t v9; // 0x100003a94
    return _fprintf((struct _IO_FILE *)v1, "L%g,%g\n", v7, (float64_t)(int64_t)v9);
}

// Address range: 0x100003b64 - 0x100003c58
int64_t function_100003b64(void) {
    // 0x100003b64
    int64_t result; // 0x100003b64
    int64_t v1; // 0x100003b64
    if ((int32_t)v1 == 0) {
        // 0x100003b98
        result = function_100003a94();
    } else {
        // 0x100003bac
        function_100003b64();
        function_100003a58();
        function_100003b64();
        function_100003a58();
        result = function_100003b64();
    }
    // 0x100003c4c
    return result;
}

// Address range: 0x100003c58 - 0x100003da4
int64_t function_100003c58(void) {
    int128_t v1 = __asm_sshll(0.0f, 0); // 0x100003c80
    int128_t v2 = __asm_sshll(0.0f, 0); // 0x100003ca8
    int64_t v3; // 0x100003c58
    if (v3 % 2 != 0) {
        // 0x100003ce8
        function_100003a58();
    }
    struct _IO_FILE * v4 = (struct _IO_FILE *)v3; // 0x100003c64
    _fprintf(v4, "<svg xmlns='http://www.w3.org/2000/svg' width='%d' height='%d'>\n", v3, v3);
    _fprintf(v4, "<rect width='100%%' height='100%%' fill='white'/>\n");
    _fprintf(v4, "<path stroke-width='1' stroke='black' fill='none' d='");
    _fprintf(v4, "M%g,%g\n", (float64_t)(int64_t)v2, (float64_t)(int64_t)v1);
    function_100003b64();
    return _fprintf(v4, "'/>\n</svg>\n");
}

// Address range: 0x100003da4 - 0x100003e58
int64_t entry_point(void) {
    char * v1 = "sierpinski_arrowhead.svg"; // 0x100003dd4
    int64_t v2; // 0x100003da4
    if ((int32_t)v2 == 2) {
        // 0x100003ddc
        v1 = (char *)*(int64_t *)(v2 + 8);
    }
    struct _IO_FILE * v3 = _fopen(v1, (char *)0x100003f97); // 0x100003df8
    int64_t result; // 0x100003da4
    if (v3 == NULL) {
        // 0x100003e14
        _perror(v1);
        result = 1;
    } else {
        // 0x100003e28
        function_100003c58();
        _fclose(v3);
        result = 0;
    }
    // 0x100003e48
    return result;
}

// Address range: 0x100003e58 - 0x100003e64
float64_t function_100003e58(float64_t a1) {
    // 0x100003e58
    return _cos(a1);
}

// Address range: 0x100003e64 - 0x100003e70
int32_t function_100003e64(struct _IO_FILE * stream) {
    // 0x100003e64
    return _fclose(stream);
}

// Address range: 0x100003e70 - 0x100003e7c
struct _IO_FILE * function_100003e70(char * filename, char * modes) {
    // 0x100003e70
    return _fopen(filename, modes);
}

// Address range: 0x100003e7c - 0x100003e88
int32_t function_100003e7c(struct _IO_FILE * stream, char * format, ...) {
    // 0x100003e7c
    return _fprintf(stream, format);
}

// Address range: 0x100003e88 - 0x100003e94
void function_100003e88(char * s) {
    // 0x100003e88
    _perror(s);
}

// Address range: 0x100003e94 - 0x100003ea0
float64_t function_100003e94(float64_t a1) {
    // 0x100003e94
    return _sin(a1);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 11

