//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <unistd.h>

// ---------------- Integer Types Definitions -----------------

typedef int64_t int128_t;

// ----------------- Float Types Definitions ------------------

typedef float float32_t;
typedef double float64_t;

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100002310(void);
int64_t function_100002638(void);
int64_t function_100002a0c(void);
int64_t function_100002ec4(void);
int64_t function_100002f6c(void);
int64_t function_100003138(void);
int64_t function_100003d04(char * a1, char * a2, int64_t a3, char * a4);
int64_t function_100003d10(int64_t a1, int64_t a2, int64_t a3, int64_t a4);
int64_t function_100003d1c(int64_t a1);
float64_t function_100003d28(float64_t a1, float64_t a2);
int64_t * function_100003d34(int32_t nmemb, int32_t size);
void function_100003d40(int32_t status);
float64_t function_100003d4c(float64_t a1);
int32_t function_100003d58(struct _IO_FILE * stream);
float64_t function_100003d64(float64_t a1, float64_t a2);
struct _IO_FILE * function_100003d70(char * filename, char * modes);
int32_t function_100003d7c(struct _IO_FILE * stream, char * format, ...);
int32_t function_100003d88(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * stream);
void function_100003d94(int64_t * ptr);
int32_t function_100003da0(struct _IO_FILE * stream, int32_t off, int32_t whence);
int32_t function_100003dac(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * s);
float64_t function_100003db8(float64_t a1, float64_t a2);
int64_t * function_100003dc4(int32_t size);
int64_t * function_100003dd0(int64_t * s, int32_t c, int32_t n);
void function_100003ddc(char * s);
float64_t function_100003de8(float64_t a1, float64_t a2);
int32_t function_100003df4(char * format, ...);

// --------------------- Global Variables ---------------------

float64_t g1 = 32.0; // 0x100003e00
float64_t g2 = 6.2831853071795862; // 0x100003e08
float64_t g3 = 3.1415926535897931; // 0x100003e10
int64_t g4 = 0; // 0x100008000
int32_t g5;

// ------- Dynamically Linked Functions Without Header --------

int64_t ___assert_rtn(char * a1, char * a2, int64_t a3, char * a4);
int64_t ___chkstk_darwin(void);
int64_t ___memset_chk(int64_t a1, int64_t a2, int64_t a3, int64_t a4);
int64_t ___stack_chk_fail(int64_t a1);
float64_t _atan2(float64_t a1, float64_t a2);
int64_t * _calloc(int32_t a1, int32_t a2);
float64_t _exp(float64_t a1);
int32_t _fclose(struct _IO_FILE * a1);
float64_t _fmod(float64_t a1, float64_t a2);
struct _IO_FILE * _fopen(char * a1, char * a2);
int32_t _fprintf(struct _IO_FILE * a1, char * a2, ...);
int32_t _fread(int64_t * a1, int32_t a2, int32_t a3, struct _IO_FILE * a4);
void _free(int64_t * a1);
int32_t _fseek(struct _IO_FILE * a1, int32_t a2, int32_t a3);
int32_t _fwrite(int64_t * a1, int32_t a2, int32_t a3, struct _IO_FILE * a4);
float64_t _hypot(float64_t a1, float64_t a2);
int64_t * _malloc(int32_t a1);
int64_t * _memset(int64_t * a1, int32_t a2, int32_t a3);
void _perror(char * a1);
float64_t _pow(float64_t a1, float64_t a2);
int32_t _printf(char * a1, ...);

// ------------------------ Functions -------------------------

// Address range: 0x100002310 - 0x100002638
int64_t function_100002310(void) {
    // 0x100002310
    int64_t v1; // 0x100002310
    struct _IO_FILE * v2 = _fopen((char *)v1, "rb"); // 0x100002330
    if (v2 == NULL) {
        // 0x10000234c
        _perror("fopen()");
        // 0x100002628
        return 0;
    }
    // 0x100002360
    int64_t v3; // bp-50, 0x100002310
    if (_fread(&v3, 2, 1, v2) != 1) {
        // 0x100002384
        _fclose(v2);
        // 0x100002628
        return 0;
    }
    // 0x100002394
    if (v3 % 0x10000 != 0x4d42) {
        int64_t v4 = *(int64_t *)*(int64_t *)0x100004028; // 0x1000023b4
        _fprintf((struct _IO_FILE *)v4, "Not a BMP file: magic=%c%c\n", 1, (char)(int64_t)v2);
        _fclose(v2);
        // 0x100002628
        return 0;
    }
    // 0x1000023f0
    int64_t v5; // bp-64, 0x100002310
    if (_fread(&v5, 12, 1, v2) != 1 || _fread((int64_t *)v1, 40, 1, v2) != 1) {
        // 0x100002414
        _fclose(v2);
        // 0x100002628
        return 0;
    }
    // 0x100002458
    if (*(int32_t *)(v1 + 16) != 0) {
        int64_t v6 = *(int64_t *)*(int64_t *)0x100004028; // 0x100002478
        _fprintf((struct _IO_FILE *)v6, "Warning, compression is not supported.\n");
    }
    // 0x10000248c
    int32_t v7; // 0x100002310
    if (_fseek(v2, v7, 0) != 0) {
        // 0x1000024b0
        _fclose(v2);
        // 0x100002628
        return 0;
    }
    int64_t * v8 = _malloc(2 * *(int32_t *)(v1 + 20)); // 0x1000024cc
    if (v8 == NULL) {
        // 0x1000024e8
        _fclose(v2);
        // 0x100002628
        return 0;
    }
    int64_t v9 = (int64_t)v8; // 0x1000024cc
    int32_t * v10 = (int32_t *)(v1 + 4); // 0x100002508
    float64_t v11 = (float64_t)(*v10 * (int32_t)*(int16_t *)(v1 + 14)) / g1; // 0x10000251c
    float64_t v12 = __asm_frintp(v11); // 0x100002520
    __asm_sshll(0.0f, 0);
    int32_t * v13 = (int32_t *)(v1 + 8); // 0x100002558
    int64_t v14 = 0; // 0x100002564
    int64_t v15 = 0; // 0x100002564
    int64_t result; // 0x100002310
    if (*v13 != 0) {
        int64_t v16 = v15; // 0x100002588
        int64_t v17; // bp-89, 0x100002310
        int64_t v18; // 0x100002310
        int64_t v19; // 0x1000025d0
        int64_t v20; // 0x1000025e4
        if (*v10 != 0) {
            if (_fread(&v17, 1, 1, v2) != 1) {
                // 0x1000025b4
                _fclose(v2);
                result = 0;
                return result;
            }
            // 0x1000025c4
            v19 = v16 + 1;
            *(int16_t *)(2 * v16 + v9) = (int16_t)v17 % 256;
            v20 = 1;
            v18 = v20;
            v16 = v19;
            v15 = v19;
            while (v20 < (int64_t)*v10) {
                // 0x100002590
                if (_fread(&v17, 1, 1, v2) != 1) {
                    // 0x1000025b4
                    _fclose(v2);
                    result = 0;
                    return result;
                }
                // 0x1000025c4
                v19 = v16 + 1;
                *(int16_t *)(2 * v16 + v9) = (int16_t)v17 % 256;
                v20 = v18 + 1;
                v18 = v20;
                v16 = v19;
                v15 = v19;
            }
        }
        // 0x1000025f0
        _fseek(v2, (int32_t)(int64_t)-((v11 - 4.0 * v12)), 1);
        v14++;
        while (v14 < (int64_t)*v13) {
            // 0x100002574
            v16 = v15;
            if (*v10 != 0) {
                if (_fread(&v17, 1, 1, v2) != 1) {
                    // 0x1000025b4
                    _fclose(v2);
                    result = 0;
                    return result;
                }
                // 0x1000025c4
                v19 = v16 + 1;
                *(int16_t *)(2 * v16 + v9) = (int16_t)v17 % 256;
                v20 = 1;
                v18 = v20;
                v16 = v19;
                v15 = v19;
                while (v20 < (int64_t)*v10) {
                    // 0x100002590
                    if (_fread(&v17, 1, 1, v2) != 1) {
                        // 0x1000025b4
                        _fclose(v2);
                        result = 0;
                        return result;
                    }
                    // 0x1000025c4
                    v19 = v16 + 1;
                    *(int16_t *)(2 * v16 + v9) = (int16_t)v17 % 256;
                    v20 = v18 + 1;
                    v18 = v20;
                    v16 = v19;
                    v15 = v19;
                }
            }
            // 0x1000025f0
            _fseek(v2, (int32_t)(int64_t)-((v11 - 4.0 * v12)), 1);
            v14++;
        }
    }
    // 0x100002614
    _fclose(v2);
    result = v9;
  lab_0x100002628:
    // 0x100002628
    return result;
}

// Address range: 0x100002638 - 0x100002a0c
int64_t function_100002638(void) {
    // 0x100002638
    int64_t v1; // 0x100002638
    struct _IO_FILE * v2 = _fopen((char *)v1, "wb"); // 0x10000265c
    if (v2 == NULL) {
        // 0x1000029f8
        return 1;
    }
    int64_t v3 = 0x4d42; // bp-58, 0x10000269c
    if (_fwrite(&v3, 2, 1, v2) != 1) {
        // 0x1000026c0
        _fclose(v2);
        // 0x1000029f8
        return 1;
    }
    int16_t * v4 = (int16_t *)(v1 + 14); // 0x1000026e0
    int32_t v5 = *(int32_t *)(v1 + 20); // 0x100002704
    int64_t v6 = v5 + 54 + (4 << (int32_t)*v4); // bp-76, 0x100002710
    if (_fwrite(&v6, 12, 1, v2) != 1) {
        // 0x100002744
        _fclose(v2);
        // 0x1000029f8
        return 1;
    }
    int32_t v7 = 0; // 0x10000277c
    int64_t result; // 0x100002638
    if (_fwrite((int64_t *)v1, 40, 1, v2) != 1) {
        // 0x100002784
        _fclose(v2);
        result = 1;
      lab_0x1000029f8:
        // 0x1000029f8
        return result;
    }
    int64_t v8 = 0x100000000000000 * (int64_t)v7 >> 56; // bp-92, 0x1000027d8
    int64_t v9; // 0x100002638
    int32_t * v10; // 0x10000284c
    int32_t * v11; // 0x10000289c
    uint64_t v12; // 0x100002884
    while (_fwrite(&v8, 4, 1, v2) == 1) {
        // 0x1000027a8
        v7++;
        uint32_t v13 = (int32_t)*v4; // 0x1000027b0
        if ((int64_t)v7 >= (int64_t)(1 << v13)) {
            // 0x100002840
            v10 = (int32_t *)(v1 + 4);
            float64_t v14 = (float64_t)(*v10 * v13) / g1; // 0x100002860
            float64_t v15 = __asm_frintp(v14); // 0x100002864
            __asm_sshll(0.0f, 0);
            v11 = (int32_t *)(v1 + 8);
            if (*v11 == 0) {
                // 0x1000029dc
                _fclose(v2);
                result = 0;
                return result;
            } else {
                // 0x1000028b8
                v12 = (int64_t)-((v14 - 4.0 * v15));
                v9 = 0;
                goto lab_0x1000028b8_2;
            }
        }
        v8 = 0x100000000000000 * (int64_t)v7 >> 56;
    }
    // 0x100002810
    _fclose(v2);
    // 0x1000029f8
    return 1;
  lab_0x1000028b8_2:;
    int64_t v16 = v9;
    int32_t v17 = *v10; // 0x1000028c0
    int64_t v18; // 0x100002638
    int64_t v19; // 0x100002638
    if (v17 == 0) {
        goto lab_0x100002950;
    } else {
        // 0x1000028d4
        v18 = v17;
        v19 = 0;
        goto lab_0x1000028d4_2;
    }
  lab_0x100002950:;
    int64_t v20 = 0; // bp-105, 0x100002950
    int64_t v21 = 0; // 0x10000296c
    if (v12 == 0) {
        goto lab_0x1000029cc;
    } else {
        goto lab_0x100002974;
    }
  lab_0x1000029cc:;
    int64_t v22 = v16 + 1; // 0x1000029d0
    v9 = v22;
    if (v22 < (int64_t)*v11) {
        goto lab_0x1000028b8_2;
    } else {
        // 0x1000029dc
        _fclose(v2);
        result = 0;
        return result;
    }
  lab_0x100002974:
    // 0x100002974
    if (_fwrite(&v20, 1, 1, v2) == 1) {
        int64_t v23 = v21 + 1; // 0x1000029bc
        v21 = v23;
        if (v23 < v12) {
            goto lab_0x100002974;
        } else {
            goto lab_0x1000029cc;
        }
    } else {
        // 0x100002998
        _fclose(v2);
        result = 1;
        return result;
    }
  lab_0x1000028d4_2:;
    uint16_t v24 = *(int16_t *)(2 * (v18 * v16 + v19) + v1); // 0x1000028f4
    v20 = 0x100000000000000 * (int64_t)v24 >> 56;
    if (_fwrite(&v20, 1, 1, v2) == 1) {
        int64_t v25 = v19 + 1; // 0x100002944
        int64_t v26 = (int64_t)*v10; // 0x1000028c0
        v18 = v26;
        v19 = v25;
        if (v25 < v26) {
            goto lab_0x1000028d4_2;
        } else {
            goto lab_0x100002950;
        }
    } else {
        // 0x100002920
        _fclose(v2);
        result = 1;
        return result;
    }
}

// Address range: 0x100002a0c - 0x100002ec4
int64_t function_100002a0c(void) {
    // 0x100002a0c
    int64_t v1; // 0x100002a0c
    uint64_t v2 = v1;
    int32_t v3 = v1; // 0x100002a2c
    int32_t v4 = v3 / 2; // 0x100002a44
    int64_t v5; // 0x100002a0c
    if (-1 - 2 * v4 != -v3) {
        // 0x100002a6c
        v5 = ___assert_rtn("convolution", "canny-edge-detector.c", 223, "kn % 2 == 1");
    }
    int32_t v6 = v1; // 0x100002a24
    int32_t v7 = v1; // 0x100002a28
    int32_t v8 = v6 - v3; // 0x100002a98
    int64_t result; // 0x100002a0c
    if (v8 == 0 || v8 < 0 != ((v8 ^ v6) & (int32_t)(v1 ^ v1)) < 0) {
        // 0x100002ae4
        result = ___assert_rtn("convolution", "canny-edge-detector.c", 224, "nx > kn && ny > kn");
        goto lab_0x100002b08;
    } else {
        int32_t v9 = v7 - v3; // 0x100002ab8
        result = v5;
        if (v9 == 0 || v9 < 0 != ((v9 ^ v7) & (int32_t)(v1 ^ v1)) < 0) {
            // 0x100002ae4
            result = ___assert_rtn("convolution", "canny-edge-detector.c", 224, "nx > kn && ny > kn");
            goto lab_0x100002b08;
        } else {
            goto lab_0x100002b08;
        }
    }
  lab_0x100002b08:;
    float32_t v10 = 3.40282347e+38f; // bp-64, 0x100002b20
    float32_t v11 = -3.40282347e+38f; // 0x100002b28
    float32_t v12 = -3.40282347e+38f; // bp-68, 0x100002b2c
    int32_t v13 = v6 - v4;
    int32_t v14 = v4 - v13;
    int32_t v15 = (v14 ^ v4) & (v13 ^ v4);
    float32_t v16; // 0x100002a0c
    if (v2 % 2 != 0) {
        if (v14 < 0 != v15 < 0) {
            int32_t v17 = v7 - v4; // 0x100002b80
            int32_t v18 = v4 - v17; // 0x100002b84
            int32_t v19 = -v4;
            int32_t v20 = v19 - v4;
            float32_t v21 = -3.40282347e+38f;
            float32_t v22 = 3.40282347e+38f;
            int32_t v23 = -0x800001;
            int32_t v24 = v4; // 0x100002ce0
            float32_t v25 = v21; // 0x100002b8c
            float32_t v26 = v22; // 0x100002b8c
            int32_t v27 = v23; // 0x100002b8c
            float32_t v28; // 0x100002a0c
            float32_t v29 = v28; // 0x100002b8c
            float32_t v30 = v21; // 0x100002b8c
            float32_t v31 = v22; // 0x100002b8c
            int32_t v32 = v23; // 0x100002b8c
            float32_t v33 = v28; // 0x100002b8c
            float32_t v34; // 0x100002a0c
            float32_t v35; // 0x100002a0c
            int32_t v36; // 0x100002a0c
            float32_t v37; // 0x100002a0c
            float32_t v38; // 0x100002a0c
            float32_t v39; // 0x100002a0c
            int32_t v40; // 0x100002a0c
            float32_t v41; // 0x100002ca4
            int32_t v42; // 0x100002a0c
            float32_t v43; // 0x100002ca0
            float32_t v44; // 0x100002a0c
            float32_t v45; // 0x100002a0c
            int64_t v46; // 0x100002a0c
            int32_t v47; // 0x100002a0c
            int32_t v48; // 0x100002a0c
            float32_t v49; // 0x100002c38
            float32_t v50; // 0x100002c40
            int64_t v51; // 0x100002c4c
            int32_t v52; // 0x100002c5c
            int32_t v53; // 0x100002be8
            int32_t v54; // 0x100002c70
            int32_t v55; // 0x100002bbc
            int32_t v56; // 0x100002ccc
            int32_t v57; // 0x100002b84
            if (v18 < 0 != ((v18 ^ v4) & (v17 ^ v4)) < 0) {
                v41 = v25;
                v34 = v27;
                v44 = v29;
                v36 = v27;
                v37 = v27;
                if (v20 == 0 || v20 < 0 != ((v20 ^ v19) & (v4 ^ v19)) < 0) {
                    v52 = v19;
                    v46 = 0;
                    __asm_sshll_5(0, 0);
                    v49 = *(float32_t *)(4 * v46 + v1);
                    v50 = v34 + v44 * v49;
                    v51 = v46 + 1;
                    v52++;
                    v53 = v52 - v4;
                    v35 = v50;
                    v45 = v49;
                    v46 = v51;
                    while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                        // 0x100002bf8
                        __asm_sshll_5(0, 0);
                        v49 = *(float32_t *)(4 * v46 + v1);
                        v50 = v35 + v45 * v49;
                        v51 = v46 + 1;
                        v52++;
                        v53 = v52 - v4;
                        v35 = v50;
                        v45 = v49;
                        v46 = v51;
                    }
                    // 0x100002c6c
                    v54 = v19 + 1;
                    v55 = v54 - v4;
                    v47 = v54;
                    while (v55 == 0 || v55 < 0 != ((v55 ^ v54) & (v54 ^ v4)) < 0) {
                        // 0x100002bf8
                        v52 = v19;
                        v45 = v49;
                        __asm_sshll_5(0, 0);
                        v49 = *(float32_t *)(4 * v51 + v1);
                        v50 += v45 * v49;
                        v51++;
                        v52++;
                        v53 = v52 - v4;
                        v35 = v50;
                        v45 = v49;
                        v46 = v51;
                        while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                            // 0x100002bf8
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v46 + v1);
                            v50 = v35 + v45 * v49;
                            v51 = v46 + 1;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                        }
                        // 0x100002c6c
                        v54 = v47 + 1;
                        v55 = v54 - v4;
                        v47 = v54;
                    }
                    // 0x100002c7c
                    v36 = v50;
                    v37 = v50;
                }
                // 0x100002c7c
                v43 = v37;
                v42 = v36;
                v38 = v26;
                if (v43 > v26) {
                    // 0x100002c94
                    v10 = v42;
                    v38 = v42;
                }
                // 0x100002ca0
                v11 = v43;
                v39 = v41;
                v40 = v43;
                if (v43 != v41) {
                    v39 = v41;
                    v40 = v43;
                    if (v43 > v41 == v43 >= v41 == v43 <= v41) {
                        // 0x100002cb8
                        v11 = v42;
                        v12 = v42;
                        v39 = v42;
                        v40 = v42;
                    }
                }
                // 0x100002cc8
                v56 = v4 + 1;
                v57 = v56 - v17;
                v26 = v38;
                v27 = v40;
                v48 = v56;
                v29 = v41;
                v30 = v39;
                v31 = v38;
                v32 = v40;
                v33 = v41;
                while (v57 < 0 != ((v57 ^ v56) & (v56 ^ v17)) < 0) {
                    // 0x100002b94
                    v41 = v39;
                    v34 = v27;
                    v44 = v29;
                    v36 = v27;
                    v37 = v27;
                    if (v20 == 0 || v20 < 0 != ((v20 ^ v19) & (v4 ^ v19)) < 0) {
                        v52 = v19;
                        v46 = 0;
                        __asm_sshll_5(0, 0);
                        v49 = *(float32_t *)(4 * v46 + v1);
                        v50 = v34 + v44 * v49;
                        v51 = v46 + 1;
                        v52++;
                        v53 = v52 - v4;
                        v35 = v50;
                        v45 = v49;
                        v46 = v51;
                        while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                            // 0x100002bf8
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v46 + v1);
                            v50 = v35 + v45 * v49;
                            v51 = v46 + 1;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                        }
                        // 0x100002c6c
                        v54 = v19 + 1;
                        v55 = v54 - v4;
                        v47 = v54;
                        while (v55 == 0 || v55 < 0 != ((v55 ^ v54) & (v54 ^ v4)) < 0) {
                            // 0x100002bf8
                            v52 = v19;
                            v45 = v49;
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v51 + v1);
                            v50 += v45 * v49;
                            v51++;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                            while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                                // 0x100002bf8
                                __asm_sshll_5(0, 0);
                                v49 = *(float32_t *)(4 * v46 + v1);
                                v50 = v35 + v45 * v49;
                                v51 = v46 + 1;
                                v52++;
                                v53 = v52 - v4;
                                v35 = v50;
                                v45 = v49;
                                v46 = v51;
                            }
                            // 0x100002c6c
                            v54 = v47 + 1;
                            v55 = v54 - v4;
                            v47 = v54;
                        }
                        // 0x100002c7c
                        v36 = v50;
                        v37 = v50;
                    }
                    // 0x100002c7c
                    v43 = v37;
                    v42 = v36;
                    v38 = v26;
                    if (v43 > v26) {
                        // 0x100002c94
                        v10 = v42;
                        v38 = v42;
                    }
                    // 0x100002ca0
                    v11 = v43;
                    v39 = v41;
                    v40 = v43;
                    if (v43 != v41) {
                        v39 = v41;
                        v40 = v43;
                        if (v43 > v41 == v43 >= v41 == v43 <= v41) {
                            // 0x100002cb8
                            v11 = v42;
                            v12 = v42;
                            v39 = v42;
                            v40 = v42;
                        }
                    }
                    // 0x100002cc8
                    v56 = v48 + 1;
                    v57 = v56 - v17;
                    v26 = v38;
                    v27 = v40;
                    v48 = v56;
                    v29 = v41;
                    v30 = v39;
                    v31 = v38;
                    v32 = v40;
                    v33 = v41;
                }
            }
            // 0x100002cdc
            v23 = v32;
            v22 = v31;
            v21 = v30;
            v24++;
            int32_t v58 = v24 - v13; // 0x100002b58
            v28 = v33;
            v16 = v33;
            while (v58 < 0 != ((v58 ^ v24) & (v24 ^ v13)) < 0) {
                // 0x100002b74
                v25 = v21;
                v26 = v22;
                v27 = v23;
                v29 = v28;
                v30 = v21;
                v31 = v22;
                v32 = v23;
                v33 = v28;
                if (v18 < 0 != ((v18 ^ v4) & (v17 ^ v4)) < 0) {
                    v41 = v25;
                    v34 = v27;
                    v44 = v29;
                    v36 = v27;
                    v37 = v27;
                    if (v20 == 0 || v20 < 0 != ((v20 ^ v19) & (v4 ^ v19)) < 0) {
                        v52 = v19;
                        v46 = 0;
                        __asm_sshll_5(0, 0);
                        v49 = *(float32_t *)(4 * v46 + v1);
                        v50 = v34 + v44 * v49;
                        v51 = v46 + 1;
                        v52++;
                        v53 = v52 - v4;
                        v35 = v50;
                        v45 = v49;
                        v46 = v51;
                        while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                            // 0x100002bf8
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v46 + v1);
                            v50 = v35 + v45 * v49;
                            v51 = v46 + 1;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                        }
                        // 0x100002c6c
                        v54 = v19 + 1;
                        v55 = v54 - v4;
                        v47 = v54;
                        while (v55 == 0 || v55 < 0 != ((v55 ^ v54) & (v54 ^ v4)) < 0) {
                            // 0x100002bf8
                            v52 = v19;
                            v45 = v49;
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v51 + v1);
                            v50 += v45 * v49;
                            v51++;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                            while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                                // 0x100002bf8
                                __asm_sshll_5(0, 0);
                                v49 = *(float32_t *)(4 * v46 + v1);
                                v50 = v35 + v45 * v49;
                                v51 = v46 + 1;
                                v52++;
                                v53 = v52 - v4;
                                v35 = v50;
                                v45 = v49;
                                v46 = v51;
                            }
                            // 0x100002c6c
                            v54 = v47 + 1;
                            v55 = v54 - v4;
                            v47 = v54;
                        }
                        // 0x100002c7c
                        v36 = v50;
                        v37 = v50;
                    }
                    // 0x100002c7c
                    v43 = v37;
                    v42 = v36;
                    v38 = v26;
                    if (v43 > v26) {
                        // 0x100002c94
                        v10 = v42;
                        v38 = v42;
                    }
                    // 0x100002ca0
                    v11 = v43;
                    v39 = v41;
                    v40 = v43;
                    if (v43 != v41) {
                        v39 = v41;
                        v40 = v43;
                        if (v43 > v41 == v43 >= v41 == v43 <= v41) {
                            // 0x100002cb8
                            v11 = v42;
                            v12 = v42;
                            v39 = v42;
                            v40 = v42;
                        }
                    }
                    // 0x100002cc8
                    v56 = v4 + 1;
                    v57 = v56 - v17;
                    v26 = v38;
                    v27 = v40;
                    v48 = v56;
                    v29 = v41;
                    v30 = v39;
                    v31 = v38;
                    v32 = v40;
                    v33 = v41;
                    while (v57 < 0 != ((v57 ^ v56) & (v56 ^ v17)) < 0) {
                        // 0x100002b94
                        v41 = v39;
                        v34 = v27;
                        v44 = v29;
                        v36 = v27;
                        v37 = v27;
                        if (v20 == 0 || v20 < 0 != ((v20 ^ v19) & (v4 ^ v19)) < 0) {
                            v52 = v19;
                            v46 = 0;
                            __asm_sshll_5(0, 0);
                            v49 = *(float32_t *)(4 * v46 + v1);
                            v50 = v34 + v44 * v49;
                            v51 = v46 + 1;
                            v52++;
                            v53 = v52 - v4;
                            v35 = v50;
                            v45 = v49;
                            v46 = v51;
                            while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                                // 0x100002bf8
                                __asm_sshll_5(0, 0);
                                v49 = *(float32_t *)(4 * v46 + v1);
                                v50 = v35 + v45 * v49;
                                v51 = v46 + 1;
                                v52++;
                                v53 = v52 - v4;
                                v35 = v50;
                                v45 = v49;
                                v46 = v51;
                            }
                            // 0x100002c6c
                            v54 = v19 + 1;
                            v55 = v54 - v4;
                            v47 = v54;
                            while (v55 == 0 || v55 < 0 != ((v55 ^ v54) & (v54 ^ v4)) < 0) {
                                // 0x100002bf8
                                v52 = v19;
                                v45 = v49;
                                __asm_sshll_5(0, 0);
                                v49 = *(float32_t *)(4 * v51 + v1);
                                v50 += v45 * v49;
                                v51++;
                                v52++;
                                v53 = v52 - v4;
                                v35 = v50;
                                v45 = v49;
                                v46 = v51;
                                while (v53 == 0 || v53 < 0 != ((v53 ^ v52) & (v52 ^ v4)) < 0) {
                                    // 0x100002bf8
                                    __asm_sshll_5(0, 0);
                                    v49 = *(float32_t *)(4 * v46 + v1);
                                    v50 = v35 + v45 * v49;
                                    v51 = v46 + 1;
                                    v52++;
                                    v53 = v52 - v4;
                                    v35 = v50;
                                    v45 = v49;
                                    v46 = v51;
                                }
                                // 0x100002c6c
                                v54 = v47 + 1;
                                v55 = v54 - v4;
                                v47 = v54;
                            }
                            // 0x100002c7c
                            v36 = v50;
                            v37 = v50;
                        }
                        // 0x100002c7c
                        v43 = v37;
                        v42 = v36;
                        v38 = v26;
                        if (v43 > v26) {
                            // 0x100002c94
                            v10 = v42;
                            v38 = v42;
                        }
                        // 0x100002ca0
                        v11 = v43;
                        v39 = v41;
                        v40 = v43;
                        if (v43 != v41) {
                            v39 = v41;
                            v40 = v43;
                            if (v43 > v41 == v43 >= v41 == v43 <= v41) {
                                // 0x100002cb8
                                v11 = v42;
                                v12 = v42;
                                v39 = v42;
                                v40 = v42;
                            }
                        }
                        // 0x100002cc8
                        v56 = v48 + 1;
                        v57 = v56 - v17;
                        v26 = v38;
                        v27 = v40;
                        v48 = v56;
                        v29 = v41;
                        v30 = v39;
                        v31 = v38;
                        v32 = v40;
                        v33 = v41;
                    }
                }
                // 0x100002cdc
                v23 = v32;
                v22 = v31;
                v21 = v30;
                v24++;
                v58 = v24 - v13;
                v28 = v33;
                v16 = v33;
            }
        }
    }
    if (v14 < 0 == v15 < 0) {
        // 0x100002eb8
        return result;
    }
    int32_t v59 = v7 - v4; // 0x100002d34
    int32_t v60 = v4 - v59; // 0x100002d38
    int32_t v61 = -v4;
    int32_t v62 = v61 - v4;
    float32_t v63 = v16; // 0x100002d40
    float32_t v64; // 0x100002a0c
    float32_t v65; // 0x100002a0c
    float32_t v66; // 0x100002a0c
    float32_t v67; // 0x100002a0c
    float32_t v68; // 0x100002a0c
    float32_t v69; // 0x100002a0c
    float32_t v70; // 0x100002a0c
    float32_t v71; // 0x100002a0c
    float32_t v72; // 0x100002a0c
    int64_t v73; // 0x100002a0c
    int32_t v74; // 0x100002a0c
    int32_t v75; // 0x100002a0c
    float32_t v76; // 0x100002dec
    float32_t v77; // 0x100002df4
    int64_t v78; // 0x100002e00
    int32_t v79; // 0x100002e10
    int32_t v80; // 0x100002d9c
    int32_t v81; // 0x100002e98
    int32_t v82; // 0x100002d38
    float32_t v83; // 0x100002e5c
    int32_t v84; // 0x100002e24
    int32_t v85; // 0x100002d70
    if (v60 < 0 != ((v60 ^ v4) & (v59 ^ v4)) < 0) {
        v64 = v11;
        v66 = v11;
        v71 = v16;
        if (v62 == 0 || v62 < 0 != ((v62 ^ v61) & (v4 ^ v61)) < 0) {
            v79 = v61;
            v73 = 0;
            __asm_sshll_5(0, 0);
            v76 = *(float32_t *)(4 * v73 + v1);
            v77 = v64 + v16 * v76;
            v78 = v73 + 1;
            v79++;
            v80 = v79 - v4;
            v65 = v77;
            v72 = v76;
            v73 = v78;
            while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                // 0x100002dac
                __asm_sshll_5(0, 0);
                v76 = *(float32_t *)(4 * v73 + v1);
                v77 = v65 + v72 * v76;
                v78 = v73 + 1;
                v79++;
                v80 = v79 - v4;
                v65 = v77;
                v72 = v76;
                v73 = v78;
            }
            // 0x100002e20
            v84 = v61 + 1;
            v85 = v84 - v4;
            v74 = v84;
            v66 = v77;
            v71 = v76;
            while (v85 == 0 || v85 < 0 != ((v85 ^ v84) & (v84 ^ v4)) < 0) {
                // 0x100002dac
                v79 = v61;
                v72 = v76;
                __asm_sshll_5(0, 0);
                v76 = *(float32_t *)(4 * v78 + v1);
                v77 += v72 * v76;
                v78++;
                v79++;
                v80 = v79 - v4;
                v65 = v77;
                v72 = v76;
                v73 = v78;
                while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                    // 0x100002dac
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v73 + v1);
                    v77 = v65 + v72 * v76;
                    v78 = v73 + 1;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                }
                // 0x100002e20
                v84 = v74 + 1;
                v85 = v84 - v4;
                v74 = v84;
                v66 = v77;
                v71 = v76;
            }
        }
        // 0x100002e30
        v68 = v66;
        v67 = v68;
        v83 = v71;
        if (v2 % 2 != 0) {
            // 0x100002e3c
            v83 = v12 - v10;
            v67 = 255.0f * (v68 - v10) / v83;
        }
        // 0x100002e6c
        v11 = v67;
        *(int16_t *)(v1 + (int64_t)(2 * (v4 * v6 + v4))) = (int16_t)(int32_t)v67;
        v81 = v4 + 1;
        v82 = v81 - v59;
        v75 = v81;
        v69 = v83;
        v63 = v83;
        while (v82 < 0 != ((v82 ^ v81) & (v81 ^ v59)) < 0) {
            // 0x100002d48
            v64 = v11;
            v70 = v69;
            v66 = v11;
            v71 = v69;
            if (v62 == 0 || v62 < 0 != ((v62 ^ v61) & (v4 ^ v61)) < 0) {
                v79 = v61;
                v73 = 0;
                __asm_sshll_5(0, 0);
                v76 = *(float32_t *)(4 * v73 + v1);
                v77 = v64 + v70 * v76;
                v78 = v73 + 1;
                v79++;
                v80 = v79 - v4;
                v65 = v77;
                v72 = v76;
                v73 = v78;
                while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                    // 0x100002dac
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v73 + v1);
                    v77 = v65 + v72 * v76;
                    v78 = v73 + 1;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                }
                // 0x100002e20
                v84 = v61 + 1;
                v85 = v84 - v4;
                v74 = v84;
                v66 = v77;
                v71 = v76;
                while (v85 == 0 || v85 < 0 != ((v85 ^ v84) & (v84 ^ v4)) < 0) {
                    // 0x100002dac
                    v79 = v61;
                    v72 = v76;
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v78 + v1);
                    v77 += v72 * v76;
                    v78++;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                    while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                        // 0x100002dac
                        __asm_sshll_5(0, 0);
                        v76 = *(float32_t *)(4 * v73 + v1);
                        v77 = v65 + v72 * v76;
                        v78 = v73 + 1;
                        v79++;
                        v80 = v79 - v4;
                        v65 = v77;
                        v72 = v76;
                        v73 = v78;
                    }
                    // 0x100002e20
                    v84 = v74 + 1;
                    v85 = v84 - v4;
                    v74 = v84;
                    v66 = v77;
                    v71 = v76;
                }
            }
            // 0x100002e30
            v68 = v66;
            v67 = v68;
            v83 = v71;
            if (v2 % 2 != 0) {
                // 0x100002e3c
                v83 = v12 - v10;
                v67 = 255.0f * (v68 - v10) / v83;
            }
            // 0x100002e6c
            v11 = v67;
            *(int16_t *)(v1 + (int64_t)(2 * (v75 * v6 + v4))) = (int16_t)(int32_t)v67;
            v81 = v75 + 1;
            v82 = v81 - v59;
            v75 = v81;
            v69 = v83;
            v63 = v83;
        }
    }
    int32_t v86 = v4 + 1; // 0x100002eac
    int32_t v87 = v86 - v13; // 0x100002d0c
    float32_t v88 = v63; // 0x100002d14
    while (v87 < 0 != ((v87 ^ v86) & (v86 ^ v13)) < 0) {
        int32_t v89 = v86;
        v69 = v88;
        v63 = v88;
        if (v60 < 0 != ((v60 ^ v4) & (v59 ^ v4)) < 0) {
            v64 = v11;
            v70 = v69;
            v66 = v11;
            v71 = v69;
            if (v62 == 0 || v62 < 0 != ((v62 ^ v61) & (v4 ^ v61)) < 0) {
                v79 = v61;
                v73 = 0;
                __asm_sshll_5(0, 0);
                v76 = *(float32_t *)(4 * v73 + v1);
                v77 = v64 + v70 * v76;
                v78 = v73 + 1;
                v79++;
                v80 = v79 - v4;
                v65 = v77;
                v72 = v76;
                v73 = v78;
                while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                    // 0x100002dac
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v73 + v1);
                    v77 = v65 + v72 * v76;
                    v78 = v73 + 1;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                }
                // 0x100002e20
                v84 = v61 + 1;
                v85 = v84 - v4;
                v74 = v84;
                v66 = v77;
                v71 = v76;
                while (v85 == 0 || v85 < 0 != ((v85 ^ v84) & (v84 ^ v4)) < 0) {
                    // 0x100002dac
                    v79 = v61;
                    v72 = v76;
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v78 + v1);
                    v77 += v72 * v76;
                    v78++;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                    while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                        // 0x100002dac
                        __asm_sshll_5(0, 0);
                        v76 = *(float32_t *)(4 * v73 + v1);
                        v77 = v65 + v72 * v76;
                        v78 = v73 + 1;
                        v79++;
                        v80 = v79 - v4;
                        v65 = v77;
                        v72 = v76;
                        v73 = v78;
                    }
                    // 0x100002e20
                    v84 = v74 + 1;
                    v85 = v84 - v4;
                    v74 = v84;
                    v66 = v77;
                    v71 = v76;
                }
            }
            // 0x100002e30
            v68 = v66;
            v67 = v68;
            v83 = v71;
            if (v2 % 2 != 0) {
                // 0x100002e3c
                v83 = v12 - v10;
                v67 = 255.0f * (v68 - v10) / v83;
            }
            // 0x100002e6c
            v11 = v67;
            *(int16_t *)(v1 + (int64_t)(2 * (v4 * v6 + v89))) = (int16_t)(int32_t)v67;
            v81 = v4 + 1;
            v82 = v81 - v59;
            v75 = v81;
            v69 = v83;
            v63 = v83;
            while (v82 < 0 != ((v82 ^ v81) & (v81 ^ v59)) < 0) {
                // 0x100002d48
                v64 = v11;
                v70 = v69;
                v66 = v11;
                v71 = v69;
                if (v62 == 0 || v62 < 0 != ((v62 ^ v61) & (v4 ^ v61)) < 0) {
                    v79 = v61;
                    v73 = 0;
                    __asm_sshll_5(0, 0);
                    v76 = *(float32_t *)(4 * v73 + v1);
                    v77 = v64 + v70 * v76;
                    v78 = v73 + 1;
                    v79++;
                    v80 = v79 - v4;
                    v65 = v77;
                    v72 = v76;
                    v73 = v78;
                    while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                        // 0x100002dac
                        __asm_sshll_5(0, 0);
                        v76 = *(float32_t *)(4 * v73 + v1);
                        v77 = v65 + v72 * v76;
                        v78 = v73 + 1;
                        v79++;
                        v80 = v79 - v4;
                        v65 = v77;
                        v72 = v76;
                        v73 = v78;
                    }
                    // 0x100002e20
                    v84 = v61 + 1;
                    v85 = v84 - v4;
                    v74 = v84;
                    v66 = v77;
                    v71 = v76;
                    while (v85 == 0 || v85 < 0 != ((v85 ^ v84) & (v84 ^ v4)) < 0) {
                        // 0x100002dac
                        v79 = v61;
                        v72 = v76;
                        __asm_sshll_5(0, 0);
                        v76 = *(float32_t *)(4 * v78 + v1);
                        v77 += v72 * v76;
                        v78++;
                        v79++;
                        v80 = v79 - v4;
                        v65 = v77;
                        v72 = v76;
                        v73 = v78;
                        while (v80 == 0 || v80 < 0 != ((v80 ^ v79) & (v79 ^ v4)) < 0) {
                            // 0x100002dac
                            __asm_sshll_5(0, 0);
                            v76 = *(float32_t *)(4 * v73 + v1);
                            v77 = v65 + v72 * v76;
                            v78 = v73 + 1;
                            v79++;
                            v80 = v79 - v4;
                            v65 = v77;
                            v72 = v76;
                            v73 = v78;
                        }
                        // 0x100002e20
                        v84 = v74 + 1;
                        v85 = v84 - v4;
                        v74 = v84;
                        v66 = v77;
                        v71 = v76;
                    }
                }
                // 0x100002e30
                v68 = v66;
                v67 = v68;
                v83 = v71;
                if (v2 % 2 != 0) {
                    // 0x100002e3c
                    v83 = v12 - v10;
                    v67 = 255.0f * (v68 - v10) / v83;
                }
                // 0x100002e6c
                v11 = v67;
                *(int16_t *)(v1 + (int64_t)(2 * (v75 * v6 + v89))) = (int16_t)(int32_t)v67;
                v81 = v75 + 1;
                v82 = v81 - v59;
                v75 = v81;
                v69 = v83;
                v63 = v83;
            }
        }
        // 0x100002ea8
        v86 = v89 + 1;
        v87 = v86 - v13;
        v88 = v63;
    }
    // 0x100002eb8
    return result;
}

// Address range: 0x100002ec4 - 0x100002f6c
int64_t function_100002ec4(void) {
    // 0x100002ec4
    __asm_sshll(0.0f, 0);
    float64_t v1; // 0x100002ec4
    __asm_frintm(0.5 * v1);
    return ___chkstk_darwin();
}

// Address range: 0x100002f6c - 0x100003138
int64_t function_100002f6c(void) {
    // 0x100002f6c
    int64_t v1; // 0x100002f6c
    int64_t v2 = v1;
    int64_t v3; // 0x100002f6c
    int64_t v4 = (int64_t)&v3 - *(int64_t *)(v2 - 96); // 0x100002f74
    int64_t * v5 = (int64_t *)(v2 - 88); // 0x100002f7c
    *v5 = v4;
    int64_t v6 = *(int64_t *)*(int64_t *)0x100004028; // 0x100002f8c
    int32_t * v7 = (int32_t *)(v2 - 40); // 0x100002f90
    float32_t * v8 = (float32_t *)(v2 - 36); // 0x100002f98
    *(int64_t *)(v4 - 16) = (int64_t)*v7;
    *(float64_t *)(v4 - 8) = (float64_t)*v8;
    int128_t v9; // 0x100002f6c
    int64_t v10 = v9; // 0x100002fb8
    _fprintf((struct _IO_FILE *)v6, "gaussian_filter: kernel size %d, sigma=%g\n", v1, (float64_t)v10);
    int64_t * v11 = (int64_t *)(v2 - 72); // 0x100002fc0
    *v11 = 0;
    int64_t v12 = v2 - 76; // 0x100002fc4
    int32_t * v13 = (int32_t *)v12; // 0x100002fc4
    *v13 = 0;
    int32_t v14 = *v7; // 0x100002fd0
    int32_t v15 = -v14; // 0x100002fd4
    if (v15 < 0 != (v14 & v15) < 0) {
        int64_t v16 = v2 - 80; // 0x100002fe4
        int32_t * v17 = (int32_t *)v16; // 0x100002fe4
        float32_t * v18 = (float32_t *)(v2 - 44);
        float64_t * v19 = (float64_t *)(v2 - 104);
        *v17 = 0;
        int32_t v20 = *v7; // 0x100002ff0
        int32_t v21 = -v20; // 0x100002ff4
        int64_t v22 = v10; // 0x100002ffc
        int64_t v23; // 0x100002f6c
        int64_t v24; // 0x100002f6c
        float64_t v25; // 0x100003028
        float32_t v26; // 0x100003034
        float32_t v27; // 0x10000303c
        float32_t v28; // 0x100003044
        float64_t v29; // 0x100003050
        float64_t v30; // 0x100003058
        float64_t v31; // 0x100003068
        int64_t v32; // 0x10000306c
        float64_t v33; // 0x100003074
        int64_t v34; // 0x100003098
        int32_t v35; // 0x1000030b4
        int32_t v36; // 0x100002ff0
        int32_t v37; // 0x100002ff4
        if (v21 < 0 != (v20 & v21) < 0) {
            *(float64_t *)(v2 - 112) = 2.0;
            v25 = _pow((float64_t)v10, (float64_t)(int64_t)v9);
            *v19 = (float64_t)((*(float32_t *)v12 - *v18) / *v8);
            v26 = *(float32_t *)v16;
            v27 = *v18;
            v28 = *v8;
            v29 = _pow(v25, (float64_t)(int64_t)v9);
            v30 = *v19;
            v31 = _exp(v29);
            v32 = *v5;
            v33 = (float64_t)*v8;
            v34 = *v11;
            *(float32_t *)(4 * v34 + v32) = (float32_t)(-0.5 * (v30 + (float64_t)((v26 - v27) / v28)) / (g2 * v33 * v33));
            *v11 = *v11 + 1;
            v35 = *v17 + 1;
            *v17 = v35;
            v23 = (float32_t)v31;
            v36 = *v7;
            v37 = v35 - v36;
            v24 = v23;
            v22 = v23;
            while (v37 < 0 != ((v37 ^ v35) & (v36 ^ v35)) < 0) {
                // 0x100003004
                *(float64_t *)(v2 - 112) = 2.0;
                v25 = _pow((float64_t)v24, (float64_t)(int64_t)v9);
                *v19 = (float64_t)((*(float32_t *)v12 - *v18) / *v8);
                v26 = *(float32_t *)v16;
                v27 = *v18;
                v28 = *v8;
                v29 = _pow(v25, (float64_t)(int64_t)v9);
                v30 = *v19;
                v31 = _exp(v29);
                v32 = *v5;
                v33 = (float64_t)*v8;
                v34 = *v11;
                *(float32_t *)(4 * v34 + v32) = (float32_t)(-0.5 * (v30 + (float64_t)((v26 - v27) / v28)) / (g2 * v33 * v33));
                *v11 = *v11 + 1;
                v35 = *v17 + 1;
                *v17 = v35;
                v23 = (float32_t)v31;
                v36 = *v7;
                v37 = v35 - v36;
                v24 = v23;
                v22 = v23;
            }
        }
        int64_t v38 = v22;
        int32_t v39 = *v13 + 1; // 0x1000030c8
        *v13 = v39;
        int32_t v40 = *v7; // 0x100002fd0
        while (v39 - v40 < 0 != ((v39 - v40 ^ v39) & (v40 ^ v39)) < 0) {
            // 0x100002fe4
            *v17 = 0;
            v20 = *v7;
            v21 = -v20;
            v24 = v38;
            v22 = v38;
            if (v21 < 0 != (v20 & v21) < 0) {
                *(float64_t *)(v2 - 112) = 2.0;
                v25 = _pow((float64_t)v24, (float64_t)(int64_t)v9);
                *v19 = (float64_t)((*(float32_t *)v12 - *v18) / *v8);
                v26 = *(float32_t *)v16;
                v27 = *v18;
                v28 = *v8;
                v29 = _pow(v25, (float64_t)(int64_t)v9);
                v30 = *v19;
                v31 = _exp(v29);
                v32 = *v5;
                v33 = (float64_t)*v8;
                v34 = *v11;
                *(float32_t *)(4 * v34 + v32) = (float32_t)(-0.5 * (v30 + (float64_t)((v26 - v27) / v28)) / (g2 * v33 * v33));
                *v11 = *v11 + 1;
                v35 = *v17 + 1;
                *v17 = v35;
                v23 = (float32_t)v31;
                v36 = *v7;
                v37 = v35 - v36;
                v24 = v23;
                v22 = v23;
                while (v37 < 0 != ((v37 ^ v35) & (v36 ^ v35)) < 0) {
                    // 0x100003004
                    *(float64_t *)(v2 - 112) = 2.0;
                    v25 = _pow((float64_t)v24, (float64_t)(int64_t)v9);
                    *v19 = (float64_t)((*(float32_t *)v12 - *v18) / *v8);
                    v26 = *(float32_t *)v16;
                    v27 = *v18;
                    v28 = *v8;
                    v29 = _pow(v25, (float64_t)(int64_t)v9);
                    v30 = *v19;
                    v31 = _exp(v29);
                    v32 = *v5;
                    v33 = (float64_t)*v8;
                    v34 = *v11;
                    *(float32_t *)(4 * v34 + v32) = (float32_t)(-0.5 * (v30 + (float64_t)((v26 - v27) / v28)) / (g2 * v33 * v33));
                    *v11 = *v11 + 1;
                    v35 = *v17 + 1;
                    *v17 = v35;
                    v23 = (float32_t)v31;
                    v36 = *v7;
                    v37 = v35 - v36;
                    v24 = v23;
                    v22 = v23;
                }
            }
            // 0x1000030c4
            v38 = v22;
            v39 = *v13 + 1;
            *v13 = v39;
            v40 = *v7;
        }
    }
    int64_t v41 = function_100002a0c(); // 0x1000030f4
    *(int64_t *)(v2 - 120) = *(int64_t *)(v2 - 56);
    int64_t result = v41; // 0x100003118
    if (*(int64_t *)*(int64_t *)0x100004020 != *(int64_t *)(v2 - 8)) {
        // 0x100003120
        result = ___stack_chk_fail(v41);
    }
    // 0x100003124
    return result;
}

// Address range: 0x100003138 - 0x100003b60
int64_t function_100003138(void) {
    // 0x100003138
    int128_t v1; // 0x100003138
    int128_t v2 = v1;
    int64_t v3 = *(int64_t *)*(int64_t *)0x100004020; // 0x100003158
    int64_t v4; // 0x100003138
    int32_t v5 = *(int32_t *)(v4 + 4); // 0x100003178
    int32_t v6 = *(int32_t *)(v4 + 8); // 0x100003184
    int32_t v7 = 2 * v5 * v6; // 0x1000031a0
    int64_t v8 = (int64_t)_calloc(v7, 1); // bp-192, 0x1000031b8
    int64_t * v9 = _calloc(v7, 1); // 0x1000031d4
    int64_t * v10 = _calloc(v7, 1); // 0x1000031f8
    int64_t * v11 = _calloc(v7, 1); // 0x10000321c
    int32_t v12 = *(int32_t *)(*(int64_t *)((int64_t)&v8 + 32) + 20); // 0x10000322c
    int64_t * v13 = _malloc(2 * v12); // 0x100003234
    if (v13 == NULL || v11 == NULL || v10 == NULL || v9 == NULL || v8 == 0) {
        int64_t v14 = *(int64_t *)*(int64_t *)0x100004028; // 0x1000032ac
        _fprintf((struct _IO_FILE *)v14, "canny_edge_detection: Failed memory allocation(s).\n");
        _exit(1);
        // UNREACHABLE
    }
    int64_t v15 = (int64_t)v10; // 0x1000031f8
    int64_t v16 = (int64_t)v11; // 0x10000321c
    function_100002ec4();
    int64_t v17; // bp-76, 0x100003138
    _memset(&v17, 0, 36);
    v17 = -0x4010000000000000;
    function_100002a0c();
    int64_t v18; // bp-112, 0x100003138
    _memset(&v18, 0, 36);
    v18 = 0x3ff0000000000000;
    function_100002a0c();
    int32_t v19 = v5 - 1; // 0x1000033d8
    int32_t v20 = 2 - v5;
    int32_t v21; // 0x100003138
    int32_t v22; // 0x100003138
    int32_t v23; // 0x100003138
    int32_t v24; // 0x100003138
    int64_t v25; // 0x100003138
    int64_t v26; // 0x100003138
    int32_t v27; // 0x100003400
    int32_t v28; // 0x1000034fc
    int64_t v29; // 0x100003574
    float64_t v30; // 0x1000035b0
    float32_t v31; // 0x1000035c4
    if (v20 < 0 == (v20 & v19) < 0) {
        int32_t v32 = v6 - 1; // 0x1000038c8
        int32_t v33 = 2 - v6; // 0x1000038cc
        v22 = v33 & v32;
        v21 = v33;
        v23 = v32;
    } else {
        // 0x1000033f8
        v27 = v6 - 1;
        int32_t v34 = 2 - v6; // 0x100003404
        int32_t v35 = v34 & v27; // 0x100003404
        int64_t v36 = v1;
        int32_t v37 = 1;
        int32_t v38 = 1; // 0x10000340c
        int64_t v39 = v36; // 0x10000340c
        int64_t v40 = v36; // 0x10000340c
        int64_t v41; // 0x100003138
        int64_t v42; // 0x100003434
        int16_t v43; // 0x100003438
        float64_t v44; // 0x10000345c
        int32_t v45; // 0x10000347c
        int32_t v46; // 0x100003404
        if (v34 < 0 != v35 < 0) {
            v42 = 2 * (int64_t)(v38 * v5 + v37);
            v43 = *(int16_t *)(v42 + (int64_t)v9);
            v44 = _hypot((float64_t)v39, (float64_t)(int64_t)v2);
            *(int16_t *)(v8 + v42) = v43;
            v45 = v38 + 1;
            v41 = (float32_t)v44;
            v46 = v45 - v27;
            v38 = v45;
            v39 = v41;
            v40 = v41;
            while (v46 < 0 != ((v46 ^ v45) & (v45 ^ v27)) < 0) {
                // 0x100003414
                v42 = 2 * (int64_t)(v38 * v5 + v37);
                v43 = *(int16_t *)(v42 + (int64_t)v9);
                v44 = _hypot((float64_t)v39, (float64_t)(int64_t)v2);
                *(int16_t *)(v8 + v42) = v43;
                v45 = v38 + 1;
                v41 = (float32_t)v44;
                v46 = v45 - v27;
                v38 = v45;
                v39 = v41;
                v40 = v41;
            }
        }
        // 0x10000348c
        v36 = v40;
        int32_t v47 = v37 + 1; // 0x100003490
        int32_t v48 = v47 - v19; // 0x1000033dc
        int32_t v49 = 1; // 0x1000033e4
        int64_t v50 = v36; // 0x1000033e4
        while (v48 < 0 != ((v48 ^ v47) & (v47 ^ v19)) < 0) {
            // 0x1000033f8
            v37 = v47;
            v38 = 1;
            v39 = v36;
            v40 = v36;
            if (v34 < 0 != v35 < 0) {
                v42 = 2 * (int64_t)(v38 * v5 + v37);
                v43 = *(int16_t *)(v42 + (int64_t)v9);
                v44 = _hypot((float64_t)v39, (float64_t)(int64_t)v2);
                *(int16_t *)(v8 + v42) = v43;
                v45 = v38 + 1;
                v41 = (float32_t)v44;
                v46 = v45 - v27;
                v38 = v45;
                v39 = v41;
                v40 = v41;
                while (v46 < 0 != ((v46 ^ v45) & (v45 ^ v27)) < 0) {
                    // 0x100003414
                    v42 = 2 * (int64_t)(v38 * v5 + v37);
                    v43 = *(int16_t *)(v42 + (int64_t)v9);
                    v44 = _hypot((float64_t)v39, (float64_t)(int64_t)v2);
                    *(int16_t *)(v8 + v42) = v43;
                    v45 = v38 + 1;
                    v41 = (float32_t)v44;
                    v46 = v45 - v27;
                    v38 = v45;
                    v39 = v41;
                    v40 = v41;
                }
            }
            // 0x10000348c
            v36 = v40;
            v47 = v37 + 1;
            v48 = v47 - v19;
            v49 = 1;
            v50 = v36;
        }
        while (true) {
            int32_t v51 = v49;
            v24 = 1;
            v25 = v50;
            v26 = v50;
            if (v34 < 0 != v35 < 0) {
                while (true) {
                  lab_0x1000034ec:
                    // 0x1000034ec
                    v28 = v24 * v5 + v51;
                    v29 = 2 * (int64_t)v28;
                    int16_t v52 = *(int16_t *)(v29 + v15); // 0x100003578
                    float64_t v53 = g3; // 0x1000035a4
                    v30 = _fmod(_atan2((float64_t)v25, (float64_t)(int64_t)v2), (float64_t)(int64_t)v2);
                    v31 = 8.0f * (float32_t)((v53 + (float64_t)v52) / v53);
                    if (v31 == 1.0f || v31 > 1.0f) {
                        goto lab_0x1000035fc;
                    } else {
                        if (v31 == 7.0f) {
                            goto lab_0x100003654;
                        } else {
                            if (v31 > 7.0f == v31 >= 7.0f == v31 <= 7.0f) {
                                goto lab_0x1000035fc;
                            } else {
                                goto lab_0x100003654;
                            }
                        }
                    }
                }
            }
          lab_0x100003840:;
            int32_t v54 = v51 + 1; // 0x100003844
            int32_t v55 = v54 - v19; // 0x1000034b4
            v49 = v54;
            v50 = v26;
            v22 = v35;
            v21 = v34;
            v23 = v27;
            if (v55 < 0 == ((v55 ^ v54) & (v54 ^ v19)) < 0) {
                // break -> 0x100003850
                break;
            }
        }
    }
    int64_t result = (int64_t)v13; // 0x100003234
    int64_t v56 = 2 * (int64_t)v5 * (int64_t)v6; // 0x100003870
    ___memset_chk(result, 0, v56, -1);
    ___memset_chk(v15, 0, v56, -1);
    if (v21 < 0 != v22 < 0) {
        int32_t v57 = v4; // 0x100003168
        int32_t v58 = v4; // 0x10000316c
        int32_t v59; // bp-144, 0x100003138
        int64_t v60 = &v59;
        int32_t v61 = 1; // 0x100003af0
        int32_t v62 = 1;
        int32_t v63 = v62; // 0x1000038fc
        int32_t v64 = v62; // 0x1000038fc
        int64_t v65; // 0x100003138
        int32_t v66; // 0x100003138
        int32_t v67; // 0x100003138
        int32_t v68; // 0x100003138
        int32_t v69; // 0x100003138
        int32_t v70; // 0x100003138
        int64_t v71; // 0x10000390c
        int32_t v72; // 0x10000390c
        int32_t v73; // 0x100003914
        int16_t * v74; // 0x10000392c
        int32_t v75; // 0x100003acc
        int32_t v76; // 0x100003adc
        int32_t v77; // 0x1000038f4
        int32_t v78; // 0x100003970
        int32_t * v79; // 0x100003a18
        int64_t v80; // 0x100003a1c
        int32_t v81; // 0x100003a1c
        int32_t v82; // 0x100003a24
        int16_t * v83; // 0x100003a44
        if (v20 < 0 != (v20 & v19) < 0) {
            v66 = v63;
            v71 = 2 * (int64_t)v66;
            v72 = (int32_t)*(int16_t *)(v71 + v16);
            v73 = v72 - v58;
            if (v73 < 0 == ((v73 ^ v72) & (v72 ^ v58)) < 0) {
                // 0x100003924
                v74 = (int16_t *)(v71 + result);
                if (*v74 == 0) {
                    // 0x100003940
                    *v74 = 255;
                    *(int32_t *)v10 = v66;
                    v78 = 0;
                    v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                    v65 = 0;
                    v67 = v78;
                    v79 = (int32_t *)(4 * v65 + v60);
                    v80 = 2 * (int64_t)*v79;
                    v81 = (int32_t)*(int16_t *)(v80 + v16);
                    v82 = v81 - v57;
                    v68 = v67;
                    if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                        // 0x100003a34
                        v83 = (int16_t *)(v80 + result);
                        v68 = v67;
                        if (*v83 == 0) {
                            // 0x100003a58
                            *v83 = 255;
                            *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                            v68 = v67 + 1;
                        }
                    }
                    // 0x100003a9c
                    v69 = v68;
                    v65++;
                    while (v65 != 8) {
                        // 0x100003a0c
                        v67 = v69;
                        v79 = (int32_t *)(4 * v65 + v60);
                        v80 = 2 * (int64_t)*v79;
                        v81 = (int32_t)*(int16_t *)(v80 + v16);
                        v82 = v81 - v57;
                        v68 = v67;
                        if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                            // 0x100003a34
                            v83 = (int16_t *)(v80 + result);
                            v68 = v67;
                            if (*v83 == 0) {
                                // 0x100003a58
                                *v83 = 255;
                                *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                v68 = v67 + 1;
                            }
                        }
                        // 0x100003a9c
                        v69 = v68;
                        v65++;
                    }
                    // 0x100003ab0
                    while (v69 >= 1) {
                        // 0x10000396c
                        v78 = v69 - 1;
                        v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                        v65 = 0;
                        v67 = v78;
                        v79 = (int32_t *)(4 * v65 + v60);
                        v80 = 2 * (int64_t)*v79;
                        v81 = (int32_t)*(int16_t *)(v80 + v16);
                        v82 = v81 - v57;
                        v68 = v67;
                        if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                            // 0x100003a34
                            v83 = (int16_t *)(v80 + result);
                            v68 = v67;
                            if (*v83 == 0) {
                                // 0x100003a58
                                *v83 = 255;
                                *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                v68 = v67 + 1;
                            }
                        }
                        // 0x100003a9c
                        v69 = v68;
                        v65++;
                        while (v65 != 8) {
                            // 0x100003a0c
                            v67 = v69;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                        }
                    }
                }
            }
            // 0x100003ac8
            v75 = v66 + 1;
            v76 = 2;
            v77 = v76 - v19;
            v70 = v76;
            v64 = v75;
            while (v77 < 0 != ((v77 ^ v76) & (v76 ^ v19)) < 0) {
                // 0x100003904
                v66 = v75;
                v71 = 2 * (int64_t)v66;
                v72 = (int32_t)*(int16_t *)(v71 + v16);
                v73 = v72 - v58;
                if (v73 < 0 == ((v73 ^ v72) & (v72 ^ v58)) < 0) {
                    // 0x100003924
                    v74 = (int16_t *)(v71 + result);
                    if (*v74 == 0) {
                        // 0x100003940
                        *v74 = 255;
                        *(int32_t *)v10 = v66;
                        v78 = 0;
                        v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                        v65 = 0;
                        v67 = v78;
                        v79 = (int32_t *)(4 * v65 + v60);
                        v80 = 2 * (int64_t)*v79;
                        v81 = (int32_t)*(int16_t *)(v80 + v16);
                        v82 = v81 - v57;
                        v68 = v67;
                        if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                            // 0x100003a34
                            v83 = (int16_t *)(v80 + result);
                            v68 = v67;
                            if (*v83 == 0) {
                                // 0x100003a58
                                *v83 = 255;
                                *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                v68 = v67 + 1;
                            }
                        }
                        // 0x100003a9c
                        v69 = v68;
                        v65++;
                        while (v65 != 8) {
                            // 0x100003a0c
                            v67 = v69;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                        }
                        // 0x100003ab0
                        while (v69 >= 1) {
                            // 0x10000396c
                            v78 = v69 - 1;
                            v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                            v65 = 0;
                            v67 = v78;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                            while (v65 != 8) {
                                // 0x100003a0c
                                v67 = v69;
                                v79 = (int32_t *)(4 * v65 + v60);
                                v80 = 2 * (int64_t)*v79;
                                v81 = (int32_t)*(int16_t *)(v80 + v16);
                                v82 = v81 - v57;
                                v68 = v67;
                                if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                    // 0x100003a34
                                    v83 = (int16_t *)(v80 + result);
                                    v68 = v67;
                                    if (*v83 == 0) {
                                        // 0x100003a58
                                        *v83 = 255;
                                        *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                        v68 = v67 + 1;
                                    }
                                }
                                // 0x100003a9c
                                v69 = v68;
                                v65++;
                            }
                        }
                    }
                }
                // 0x100003ac8
                v75 = v66 + 1;
                v76 = v70 + 1;
                v77 = v76 - v19;
                v70 = v76;
                v64 = v75;
            }
        }
        // 0x100003aec
        v62 = v64;
        v61++;
        while (v61 - v23 < 0 != ((v61 - v23 ^ v61) & (v61 ^ v23)) < 0) {
            // 0x1000038e8
            v63 = v62;
            v64 = v62;
            if (v20 < 0 != (v20 & v19) < 0) {
                v66 = v63;
                v71 = 2 * (int64_t)v66;
                v72 = (int32_t)*(int16_t *)(v71 + v16);
                v73 = v72 - v58;
                if (v73 < 0 == ((v73 ^ v72) & (v72 ^ v58)) < 0) {
                    // 0x100003924
                    v74 = (int16_t *)(v71 + result);
                    if (*v74 == 0) {
                        // 0x100003940
                        *v74 = 255;
                        *(int32_t *)v10 = v66;
                        v78 = 0;
                        v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                        v65 = 0;
                        v67 = v78;
                        v79 = (int32_t *)(4 * v65 + v60);
                        v80 = 2 * (int64_t)*v79;
                        v81 = (int32_t)*(int16_t *)(v80 + v16);
                        v82 = v81 - v57;
                        v68 = v67;
                        if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                            // 0x100003a34
                            v83 = (int16_t *)(v80 + result);
                            v68 = v67;
                            if (*v83 == 0) {
                                // 0x100003a58
                                *v83 = 255;
                                *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                v68 = v67 + 1;
                            }
                        }
                        // 0x100003a9c
                        v69 = v68;
                        v65++;
                        while (v65 != 8) {
                            // 0x100003a0c
                            v67 = v69;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                        }
                        // 0x100003ab0
                        while (v69 >= 1) {
                            // 0x10000396c
                            v78 = v69 - 1;
                            v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                            v65 = 0;
                            v67 = v78;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                            while (v65 != 8) {
                                // 0x100003a0c
                                v67 = v69;
                                v79 = (int32_t *)(4 * v65 + v60);
                                v80 = 2 * (int64_t)*v79;
                                v81 = (int32_t)*(int16_t *)(v80 + v16);
                                v82 = v81 - v57;
                                v68 = v67;
                                if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                    // 0x100003a34
                                    v83 = (int16_t *)(v80 + result);
                                    v68 = v67;
                                    if (*v83 == 0) {
                                        // 0x100003a58
                                        *v83 = 255;
                                        *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                        v68 = v67 + 1;
                                    }
                                }
                                // 0x100003a9c
                                v69 = v68;
                                v65++;
                            }
                        }
                    }
                }
                // 0x100003ac8
                v75 = v66 + 1;
                v76 = 2;
                v77 = v76 - v19;
                v70 = v76;
                v64 = v75;
                while (v77 < 0 != ((v77 ^ v76) & (v76 ^ v19)) < 0) {
                    // 0x100003904
                    v66 = v75;
                    v71 = 2 * (int64_t)v66;
                    v72 = (int32_t)*(int16_t *)(v71 + v16);
                    v73 = v72 - v58;
                    if (v73 < 0 == ((v73 ^ v72) & (v72 ^ v58)) < 0) {
                        // 0x100003924
                        v74 = (int16_t *)(v71 + result);
                        if (*v74 == 0) {
                            // 0x100003940
                            *v74 = 255;
                            *(int32_t *)v10 = v66;
                            v78 = 0;
                            v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                            v65 = 0;
                            v67 = v78;
                            v79 = (int32_t *)(4 * v65 + v60);
                            v80 = 2 * (int64_t)*v79;
                            v81 = (int32_t)*(int16_t *)(v80 + v16);
                            v82 = v81 - v57;
                            v68 = v67;
                            if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                // 0x100003a34
                                v83 = (int16_t *)(v80 + result);
                                v68 = v67;
                                if (*v83 == 0) {
                                    // 0x100003a58
                                    *v83 = 255;
                                    *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                    v68 = v67 + 1;
                                }
                            }
                            // 0x100003a9c
                            v69 = v68;
                            v65++;
                            while (v65 != 8) {
                                // 0x100003a0c
                                v67 = v69;
                                v79 = (int32_t *)(4 * v65 + v60);
                                v80 = 2 * (int64_t)*v79;
                                v81 = (int32_t)*(int16_t *)(v80 + v16);
                                v82 = v81 - v57;
                                v68 = v67;
                                if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                    // 0x100003a34
                                    v83 = (int16_t *)(v80 + result);
                                    v68 = v67;
                                    if (*v83 == 0) {
                                        // 0x100003a58
                                        *v83 = 255;
                                        *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                        v68 = v67 + 1;
                                    }
                                }
                                // 0x100003a9c
                                v69 = v68;
                                v65++;
                            }
                            // 0x100003ab0
                            while (v69 >= 1) {
                                // 0x10000396c
                                v78 = v69 - 1;
                                v59 = *(int32_t *)(4 * (int64_t)v78 + v15) - v5;
                                v65 = 0;
                                v67 = v78;
                                v79 = (int32_t *)(4 * v65 + v60);
                                v80 = 2 * (int64_t)*v79;
                                v81 = (int32_t)*(int16_t *)(v80 + v16);
                                v82 = v81 - v57;
                                v68 = v67;
                                if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                    // 0x100003a34
                                    v83 = (int16_t *)(v80 + result);
                                    v68 = v67;
                                    if (*v83 == 0) {
                                        // 0x100003a58
                                        *v83 = 255;
                                        *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                        v68 = v67 + 1;
                                    }
                                }
                                // 0x100003a9c
                                v69 = v68;
                                v65++;
                                while (v65 != 8) {
                                    // 0x100003a0c
                                    v67 = v69;
                                    v79 = (int32_t *)(4 * v65 + v60);
                                    v80 = 2 * (int64_t)*v79;
                                    v81 = (int32_t)*(int16_t *)(v80 + v16);
                                    v82 = v81 - v57;
                                    v68 = v67;
                                    if (v82 < 0 == ((v82 ^ v81) & (v81 ^ v57)) < 0) {
                                        // 0x100003a34
                                        v83 = (int16_t *)(v80 + result);
                                        v68 = v67;
                                        if (*v83 == 0) {
                                            // 0x100003a58
                                            *v83 = 255;
                                            *(int32_t *)(4 * (int64_t)v67 + v15) = *v79;
                                            v68 = v67 + 1;
                                        }
                                    }
                                    // 0x100003a9c
                                    v69 = v68;
                                    v65++;
                                }
                            }
                        }
                    }
                    // 0x100003ac8
                    v75 = v66 + 1;
                    v76 = v70 + 1;
                    v77 = v76 - v19;
                    v70 = v76;
                    v64 = v75;
                }
            }
            // 0x100003aec
            v62 = v64;
            v61++;
        }
    }
    // 0x100003afc
    _free(v9);
    _free(v10);
    _free((int64_t *)v8);
    _free(v11);
    if (*(int64_t *)*(int64_t *)0x100004020 != v3) {
        // 0x100003b48
        ___stack_chk_fail((int64_t)&g5);
    }
    // 0x100003b4c
    return result;
  lab_0x1000035fc:;
    int16_t v84 = *(int16_t *)(v8 + v29); // 0x100003608
    int32_t v85 = v84; // 0x100003608
    int16_t v86 = *(int16_t *)(v8 + 2 * (int64_t)(v28 - 1)); // 0x100003614
    int32_t v87 = v85 - (int32_t)v86; // 0x100003618
    int16_t v88; // 0x100003138
    if (v87 == 0 || v87 < 0 != ((v87 ^ v85) & (int32_t)(v86 ^ v84)) < 0) {
        goto lab_0x100003654;
    } else {
        int16_t v89 = *(int16_t *)(v8 + 2 * (int64_t)(v28 + 1)); // 0x100003640
        int32_t v90 = v85 - (int32_t)v89; // 0x100003644
        v88 = v84;
        if (v90 == 0 || v90 < 0 != ((v90 ^ v85) & (int32_t)(v89 ^ v84)) < 0) {
            goto lab_0x100003654;
        } else {
            // 0x1000037ec
            *(int16_t *)(v29 + v16) = v88;
            goto lab_0x10000382c;
        }
    }
  lab_0x100003654:;
    int32_t v91 = v28 - v5; // 0x10000350c
    int32_t v92 = v28 + v5; // 0x10000351c
    if (v31 == 1.0f) {
        goto lab_0x1000036dc;
    } else {
        if (v31 > 1.0f == v31 >= 1.0f == v31 <= 1.0f) {
            if (v31 <= 3.0f == (v31 != 3.0f)) {
                goto lab_0x1000036dc;
            } else {
                int16_t v93 = *(int16_t *)(v8 + v29); // 0x100003690
                int32_t v94 = v93; // 0x100003690
                int16_t v95 = *(int16_t *)(v8 + 2 * (int64_t)(v91 + 1)); // 0x10000369c
                int32_t v96 = v94 - (int32_t)v95; // 0x1000036a0
                if (v96 == 0 || v96 < 0 != ((v96 ^ v94) & (int32_t)(v95 ^ v93)) < 0) {
                    goto lab_0x1000036dc;
                } else {
                    int16_t v97 = *(int16_t *)(v8 + 2 * (int64_t)(v92 - 1)); // 0x1000036c8
                    int32_t v98 = v94 - (int32_t)v97; // 0x1000036cc
                    v88 = v93;
                    if (v98 == 0 || v98 < 0 != ((v98 ^ v94) & (int32_t)(v97 ^ v93)) < 0) {
                        goto lab_0x1000036dc;
                    } else {
                        // 0x1000037ec
                        *(int16_t *)(v29 + v16) = v88;
                        goto lab_0x10000382c;
                    }
                }
            }
        } else {
            goto lab_0x1000036dc;
        }
    }
  lab_0x1000036dc:
    if (v31 == 3.0f) {
        goto lab_0x100003764;
    } else {
        if (v31 > 3.0f == v31 >= 3.0f == v31 <= 3.0f) {
            if (v31 <= 5.0f == (v31 != 5.0f)) {
                goto lab_0x100003764;
            } else {
                int16_t v99 = *(int16_t *)(v8 + v29); // 0x100003718
                int32_t v100 = v99; // 0x100003718
                int16_t v101 = *(int16_t *)(v8 + 2 * (int64_t)v91); // 0x100003724
                int32_t v102 = v100 - (int32_t)v101; // 0x100003728
                if (v102 == 0 || v102 < 0 != ((v102 ^ v100) & (int32_t)(v101 ^ v99)) < 0) {
                    goto lab_0x100003764;
                } else {
                    int16_t v103 = *(int16_t *)(v8 + 2 * (int64_t)v92); // 0x100003750
                    int32_t v104 = v100 - (int32_t)v103; // 0x100003754
                    v88 = v99;
                    if (v104 == 0 || v104 < 0 != ((v104 ^ v100) & (int32_t)(v103 ^ v99)) < 0) {
                        goto lab_0x100003764;
                    } else {
                        // 0x1000037ec
                        *(int16_t *)(v29 + v16) = v88;
                        goto lab_0x10000382c;
                    }
                }
            }
        } else {
            goto lab_0x100003764;
        }
    }
  lab_0x100003764:
    if (v31 == 5.0f) {
        // 0x100003814
        *(int16_t *)(v29 + v16) = 0;
        goto lab_0x10000382c;
    } else {
        if (v31 > 5.0f == v31 >= 5.0f == v31 <= 5.0f) {
            if (v31 <= 7.0f == (v31 != 7.0f)) {
                // 0x100003814
                *(int16_t *)(v29 + v16) = 0;
                goto lab_0x10000382c;
            } else {
                int16_t v105 = *(int16_t *)(v8 + v29); // 0x1000037a0
                int32_t v106 = v105; // 0x1000037a0
                int16_t v107 = *(int16_t *)(v8 + 2 * (int64_t)(v91 - 1)); // 0x1000037ac
                int32_t v108 = v106 - (int32_t)v107; // 0x1000037b0
                if (v108 == 0 || v108 < 0 != ((v108 ^ v106) & (int32_t)(v107 ^ v105)) < 0) {
                    // 0x100003814
                    *(int16_t *)(v29 + v16) = 0;
                    goto lab_0x10000382c;
                } else {
                    int16_t v109 = *(int16_t *)(v8 + 2 * (int64_t)(v92 + 1)); // 0x1000037d8
                    int32_t v110 = v106 - (int32_t)v109; // 0x1000037dc
                    v88 = v105;
                    if (v110 == 0 || v110 < 0 != ((v110 ^ v106) & (int32_t)(v109 ^ v105)) < 0) {
                        // 0x100003814
                        *(int16_t *)(v29 + v16) = 0;
                        goto lab_0x10000382c;
                    } else {
                        // 0x1000037ec
                        *(int16_t *)(v29 + v16) = v88;
                        goto lab_0x10000382c;
                    }
                }
            }
        } else {
            // 0x100003814
            *(int16_t *)(v29 + v16) = 0;
            goto lab_0x10000382c;
        }
    }
  lab_0x10000382c:;
    int32_t v111 = v24 + 1; // 0x100003830
    int64_t v112 = (float32_t)v30;
    int32_t v113 = v111 - v27; // 0x1000034dc
    v24 = v111;
    v25 = v112;
    v26 = v112;
    if (v113 < 0 == ((v113 ^ v111) & (v111 ^ v27)) < 0) {
        // break -> 0x100003840
        goto lab_0x100003840;
    }
    goto lab_0x1000034ec;
}

// Address range: 0x100003b60 - 0x100003d04
int64_t entry_point(void) {
    // 0x100003b60
    int64_t v1; // 0x100003b60
    int32_t v2 = v1; // 0x100003b70
    if (v2 < 2 != (1 - v2 & v2) < 0) {
        // 0x100003b8c
        _printf("Usage: %s image.bmp\n", (char *)v1);
        // 0x100003cf4
        return 1;
    }
    int64_t v3 = function_100002310(); // 0x100003bc4
    if (v3 == 0) {
        int64_t v4 = *(int64_t *)*(int64_t *)0x100004028; // 0x100003be8
        _fprintf((struct _IO_FILE *)v4, "main: BMP image not loaded.\n");
        // 0x100003cf4
        return 1;
    }
    // 0x100003c04
    _printf("Info: %d x %d x %d\n", (int64_t)&g4, v1, v1);
    int64_t v5 = function_100003138(); // 0x100003c58
    if (v5 == 0) {
        int64_t v6 = *(int64_t *)*(int64_t *)0x100004028; // 0x100003c7c
        _fprintf((struct _IO_FILE *)v6, "main: failed canny_edge_detection.\n");
        // 0x100003cf4
        return 1;
    }
    // 0x100003c98
    int64_t result; // 0x100003b60
    if (function_100002638() % 2 == 0) {
        // 0x100003cdc
        _free((int64_t *)v3);
        _free((int64_t *)v5);
        result = 0;
    } else {
        int64_t v7 = *(int64_t *)*(int64_t *)0x100004028; // 0x100003cc0
        _fprintf((struct _IO_FILE *)v7, "main: BMP image not saved.\n");
        result = 1;
    }
    // 0x100003cf4
    return result;
}

// Address range: 0x100003d04 - 0x100003d10
int64_t function_100003d04(char * a1, char * a2, int64_t a3, char * a4) {
    // 0x100003d04
    return ___assert_rtn(a1, a2, a3, a4);
}

// Address range: 0x100003d10 - 0x100003d1c
int64_t function_100003d10(int64_t a1, int64_t a2, int64_t a3, int64_t a4) {
    // 0x100003d10
    return ___memset_chk(a1, a2, a3, a4);
}

// Address range: 0x100003d1c - 0x100003d28
int64_t function_100003d1c(int64_t a1) {
    // 0x100003d1c
    return ___stack_chk_fail(a1);
}

// Address range: 0x100003d28 - 0x100003d34
float64_t function_100003d28(float64_t a1, float64_t a2) {
    // 0x100003d28
    return _atan2(a1, a2);
}

// Address range: 0x100003d34 - 0x100003d40
int64_t * function_100003d34(int32_t nmemb, int32_t size) {
    // 0x100003d34
    return _calloc(nmemb, size);
}

// Address range: 0x100003d40 - 0x100003d4c
void function_100003d40(int32_t status) {
    // 0x100003d40
    _exit(status);
}

// Address range: 0x100003d4c - 0x100003d58
float64_t function_100003d4c(float64_t a1) {
    // 0x100003d4c
    return _exp(a1);
}

// Address range: 0x100003d58 - 0x100003d64
int32_t function_100003d58(struct _IO_FILE * stream) {
    // 0x100003d58
    return _fclose(stream);
}

// Address range: 0x100003d64 - 0x100003d70
float64_t function_100003d64(float64_t a1, float64_t a2) {
    // 0x100003d64
    return _fmod(a1, a2);
}

// Address range: 0x100003d70 - 0x100003d7c
struct _IO_FILE * function_100003d70(char * filename, char * modes) {
    // 0x100003d70
    return _fopen(filename, modes);
}

// Address range: 0x100003d7c - 0x100003d88
int32_t function_100003d7c(struct _IO_FILE * stream, char * format, ...) {
    // 0x100003d7c
    return _fprintf(stream, format);
}

// Address range: 0x100003d88 - 0x100003d94
int32_t function_100003d88(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * stream) {
    // 0x100003d88
    return _fread(ptr, size, n, stream);
}

// Address range: 0x100003d94 - 0x100003da0
void function_100003d94(int64_t * ptr) {
    // 0x100003d94
    _free(ptr);
}

// Address range: 0x100003da0 - 0x100003dac
int32_t function_100003da0(struct _IO_FILE * stream, int32_t off, int32_t whence) {
    // 0x100003da0
    return _fseek(stream, off, whence);
}

// Address range: 0x100003dac - 0x100003db8
int32_t function_100003dac(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * s) {
    // 0x100003dac
    return _fwrite(ptr, size, n, s);
}

// Address range: 0x100003db8 - 0x100003dc4
float64_t function_100003db8(float64_t a1, float64_t a2) {
    // 0x100003db8
    return _hypot(a1, a2);
}

// Address range: 0x100003dc4 - 0x100003dd0
int64_t * function_100003dc4(int32_t size) {
    // 0x100003dc4
    return _malloc(size);
}

// Address range: 0x100003dd0 - 0x100003ddc
int64_t * function_100003dd0(int64_t * s, int32_t c, int32_t n) {
    // 0x100003dd0
    return _memset(s, c, n);
}

// Address range: 0x100003ddc - 0x100003de8
void function_100003ddc(char * s) {
    // 0x100003ddc
    _perror(s);
}

// Address range: 0x100003de8 - 0x100003df4
float64_t function_100003de8(float64_t a1, float64_t a2) {
    // 0x100003de8
    return _pow(a1, a2);
}

// Address range: 0x100003df4 - 0x100003e00
int32_t function_100003df4(char * format, ...) {
    // 0x100003df4
    return _printf(format);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 28

