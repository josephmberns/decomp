//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003af4(void);
int64_t function_100003bbc(void);
int64_t function_100003c90(void);
int64_t function_100003d5c(void);
void function_100003f2c(void);
void function_100003f38(int64_t * ptr);
int64_t * function_100003f44(int32_t size);
int32_t function_100003f50(char * format, ...);
int64_t * function_100003f5c(int64_t * ptr, int32_t size);

// --------------------- Global Variables ---------------------

int32_t g1;

// ------- Dynamically Linked Functions Without Header --------

void _abort(void);
void _free(int64_t * a1);
int64_t * _malloc(int32_t a1);
int32_t _printf(char * a1, ...);
int64_t * _realloc(int64_t * a1, int32_t a2);

// ------------------------ Functions -------------------------

// Address range: 0x100003af4 - 0x100003bbc
int64_t function_100003af4(void) {
    // 0x100003af4
    int64_t v1; // 0x100003af4
    int64_t v2 = v1;
    int64_t * v3 = _malloc(24); // 0x100003b28
    if (v3 == NULL) {
        // 0x100003bac
        return 0;
    }
    int64_t v4 = v2 == 0 ? 4 : v2;
    int64_t * v5 = _malloc(4 * (int32_t)v4); // 0x100003b58
    *v3 = (int64_t)v5;
    int64_t result; // 0x100003af4
    if (v5 == NULL) {
        // 0x100003b7c
        _free(v3);
        result = 0;
    } else {
        int64_t v6 = (int64_t)v3; // 0x100003b28
        *(int64_t *)(v6 + 16) = 0;
        *(int64_t *)(v6 + 8) = v4;
        result = v6;
    }
    // 0x100003bac
    return result;
}

// Address range: 0x100003bbc - 0x100003c90
int64_t function_100003bbc(void) {
    // 0x100003bbc
    int64_t v1; // 0x100003bbc
    int64_t * v2 = (int64_t *)(v1 + 16); // 0x100003bd4
    uint64_t v3 = *v2; // 0x100003bd4
    int64_t * v4 = (int64_t *)(v1 + 8); // 0x100003bdc
    uint64_t v5 = *v4; // 0x100003bdc
    int64_t v6 = v3; // 0x100003be8
    int64_t v7; // 0x100003bbc
    if (v3 >= v5) {
        int64_t * v8 = (int64_t *)v1; // 0x100003c08
        int64_t * v9 = _realloc(v8, 8 * (int32_t)v5); // 0x100003c08
        if (v9 == NULL) {
            // 0x100003c80
            return 0xffffffff;
        }
        int64_t v10 = (int64_t)v9; // 0x100003c08
        *v8 = v10;
        *v4 = 2 * *v4;
        v6 = *v2;
        v7 = v10;
    }
    // 0x100003c50
    *v2 = v6 + 1;
    *(int32_t *)(4 * v6 + v7) = (int32_t)v1;
    // 0x100003c80
    return *v2 & 0xffffffff;
}

// Address range: 0x100003c90 - 0x100003d5c
int64_t function_100003c90(void) {
    // 0x100003c90
    int64_t v1; // 0x100003c90
    int64_t * v2 = (int64_t *)(v1 + 16); // 0x100003ca4
    int64_t v3 = *v2; // 0x100003ca4
    int64_t v4 = v3; // 0x100003cb0
    int64_t v5; // 0x100003c90
    if (v3 == 0) {
        // 0x100003cb8
        _abort();
        v4 = *v2;
        v5 = &g1;
    }
    int64_t v6 = v4 - 1; // 0x100003ccc
    *v2 = v6;
    int64_t * v7 = (int64_t *)(v1 + 8); // 0x100003ce8
    uint64_t v8 = *v7; // 0x100003ce8
    if (v8 >= 2 * v6 && v8 >= 8) {
        uint64_t v9 = v8 / 2; // 0x100003d20
        *v7 = v9;
        int64_t * v10 = _realloc((int64_t *)v5, 4 * (int32_t)v9); // 0x100003d3c
        *(int64_t *)v1 = (int64_t)v10;
    }
    // 0x100003d4c
    return (int64_t)*(int32_t *)(4 * v6 + v5);
}

// Address range: 0x100003d5c - 0x100003d8c
int64_t function_100003d5c(void) {
    // 0x100003d5c
    int64_t v1; // 0x100003d5c
    int64_t * v2 = (int64_t *)v1; // 0x100003d74
    _free(v2);
    _free(v2);
    return &g1;
}

// Address range: 0x100003d8c - 0x100003f2c
int64_t entry_point(void) {
    int64_t v1 = function_100003af4(); // 0x100003da0
    _printf("pushing: ");
    int64_t v2 = 97;
    int64_t v3; // 0x100003d8c
    _printf(" %c", (char)v3);
    function_100003bbc();
    int64_t v4 = v2 + 1; // 0x100003e04
    int32_t v5 = v4; // 0x100003dc0
    int32_t v6 = v5 - 122; // 0x100003dc4
    v3 = v2;
    while (v6 == 0 || v6 < 0 != (121 - v5 & v5) < 0) {
        // 0x100003dd4
        v2 = v4 & 0xffffffff;
        _printf(" %c", (char)v3);
        function_100003bbc();
        v4 = v2 + 1;
        v5 = v4;
        v6 = v5 - 122;
        v3 = v2;
    }
    // 0x100003e10
    _printf("\nsize now: %d", v2);
    char * v7 = (char *)v2; // 0x100003e68
    _printf("\nstack is%s empty\n", v7);
    _printf("\npoppoing:");
    int64_t * v8 = (int64_t *)(v1 + 16); // 0x100003e80
    if (*v8 == 0) {
        // 0x100003eb8
        _printf("\nsize now: %d", v2);
        _printf("\nstack is%s empty\n", v7);
        function_100003d5c();
        return 0;
    }
    function_100003c90();
    _printf(" %c", (char)v2);
    // 0x100003e94
    while (*v8 != 0) {
        // 0x100003e94
        function_100003c90();
        _printf(" %c", (char)v2);
    }
    // 0x100003eb8
    _printf("\nsize now: %d", v2);
    _printf("\nstack is%s empty\n", v7);
    function_100003d5c();
    return 0;
}

// Address range: 0x100003f2c - 0x100003f38
void function_100003f2c(void) {
    // 0x100003f2c
    _abort();
}

// Address range: 0x100003f38 - 0x100003f44
void function_100003f38(int64_t * ptr) {
    // 0x100003f38
    _free(ptr);
}

// Address range: 0x100003f44 - 0x100003f50
int64_t * function_100003f44(int32_t size) {
    // 0x100003f44
    return _malloc(size);
}

// Address range: 0x100003f50 - 0x100003f5c
int32_t function_100003f50(char * format, ...) {
    // 0x100003f50
    return _printf(format);
}

// Address range: 0x100003f5c - 0x100003f68
int64_t * function_100003f5c(int64_t * ptr, int32_t size) {
    // 0x100003f5c
    return _realloc(ptr, size);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 10

