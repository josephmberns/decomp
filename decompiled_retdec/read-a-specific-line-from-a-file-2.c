//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdint.h>
#include <stdlib.h>

// ------------------------ Structures ------------------------

struct _IO_FILE {
    int32_t e0;
};

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_100003af4(void);
int64_t function_100003eac(void);
int32_t function_100003eb8(struct _IO_FILE * stream);
int32_t function_100003ec4(struct _IO_FILE * stream);
int32_t function_100003ed0(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * stream);
void function_100003edc(int64_t * ptr);
int64_t * function_100003ee8(int32_t size);
int32_t function_100003ef4(char * format, ...);
int32_t function_100003f00(char * s);
int64_t * function_100003f0c(int64_t * ptr, int32_t size);

// ------- Dynamically Linked Functions Without Header --------

int64_t ___stack_chk_fail(void);
int32_t _feof(struct _IO_FILE * a1);
int32_t _ferror(struct _IO_FILE * a1);
int32_t _fread(int64_t * a1, int32_t a2, int32_t a3, struct _IO_FILE * a4);
void _free(int64_t * a1);
int64_t * _malloc(int32_t a1);
int32_t _printf(char * a1, ...);
int32_t _puts(char * a1);
int64_t * _realloc(int64_t * a1, int32_t a2);

// ------------------------ Functions -------------------------

// Address range: 0x100003af4 - 0x100003db0
int64_t function_100003af4(void) {
    // 0x100003af4
    int64_t v1; // 0x100003af4
    int32_t v2 = v1; // 0x100003b18
    int64_t * v3 = _malloc(256); // 0x100003b28
    int64_t result = 0; // 0x100003b50
    if (v2 < 1 == (v2 & -v2) < 0) {
        // 0x100003b60
        result = 0;
        if (v3 != NULL) {
            int64_t v4 = (int64_t)v3; // 0x100003b28
            int64_t v5 = 0; // 0x100003b94
            int64_t v6 = v4; // 0x100003b94
            if (v2 == 0) {
              lab_0x100003d24_2:;
                int64_t * v7 = _realloc((int64_t *)v6, (int32_t)v5 + 1); // 0x100003d30
                result = 0;
                if (v7 != NULL) {
                    int64_t v8 = (int64_t)v7; // 0x100003d30
                    *(char *)(v5 + v8) = 0;
                    result = v8;
                }
            } else {
                // 0x100003bc4
                int64_t v9; // bp-296, 0x100003af4
                int64_t v10 = &v9;
                int32_t v11 = v2 == 1;
                int64_t v12 = 0;
                int64_t v13 = 256;
                int32_t v14 = v2;
                int64_t v15 = v4;
                uint32_t v16 = _fread(&v9, 1, 256, (struct _IO_FILE *)v1); // 0x100003bac
                while (v16 != 0) {
                    int32_t v17 = v11; // 0x100003be8
                    int64_t v18 = v15; // 0x100003be8
                    int64_t v19 = v12; // 0x100003be8
                    int64_t v20 = v13; // 0x100003be8
                    int32_t v21 = v14; // 0x100003be8
                    int32_t v22 = v14; // 0x100003be8
                    int64_t v23 = v13; // 0x100003be8
                    int64_t v24 = v12; // 0x100003be8
                    int64_t v25 = v15; // 0x100003be8
                    int32_t v26 = v11; // 0x100003be8
                    if (v16 != 0) {
                        int32_t v27 = v21;
                        int64_t v28 = v20;
                        int64_t v29 = v19;
                        int64_t v30 = v18;
                        int32_t v31 = v17;
                        int64_t v32 = 0;
                        char * v33; // 0x100003af4
                        int64_t v34; // 0x100003af4
                        int64_t v35; // 0x100003af4
                        int64_t v36; // 0x100003af4
                        int64_t v37; // 0x100003af4
                        char * v38; // 0x100003af4
                        int64_t v39; // 0x100003c20
                        int64_t * v40; // 0x100003c30
                        if (v31 == 0) {
                            // 0x100003bf0
                            v33 = (char *)(v32 + v10);
                            v34 = v28;
                            v35 = v29;
                            v37 = v30;
                        } else {
                            // 0x100003c04
                            v39 = v28;
                            v36 = v30;
                            if (v29 >= v28) {
                                // 0x100003c1c
                                v39 = 2 * v28;
                                v40 = _realloc((int64_t *)v30, (int32_t)v39);
                                v36 = (int64_t)v40;
                                result = 0;
                                if (v40 == NULL) {
                                    goto lab_0x100003d70;
                                }
                            }
                            // 0x100003c58
                            v38 = (char *)(v32 + v10);
                            *(char *)(v36 + v29) = *v38;
                            v33 = v38;
                            v34 = v39;
                            v35 = v29 + 1;
                            v37 = v36;
                        }
                        int64_t v41 = v37;
                        int64_t v42 = v35;
                        int32_t v43 = v27; // 0x100003c98
                        int32_t v44 = v31; // 0x100003c98
                        if (*v33 == 10) {
                            // 0x100003ca0
                            v43 = v27 - 1;
                            v44 = v27 == 2 ? 1 : v31;
                            v5 = v42;
                            v6 = v41;
                            if (v43 == 0) {
                                goto lab_0x100003d24_2;
                            }
                        }
                        int32_t v45 = 1; // 0x100003cf0
                        int32_t v46 = v45; // 0x100003be8
                        v22 = v43;
                        v23 = v34;
                        v24 = v42;
                        v25 = v41;
                        v26 = v44;
                        while (v16 > v45) {
                            // 0x100003bf0
                            v27 = v43;
                            v28 = v34;
                            v29 = v42;
                            v30 = v41;
                            v31 = v44;
                            v32 = v45;
                            if (v31 == 0) {
                                // 0x100003bf0
                                v33 = (char *)(v32 + v10);
                                v34 = v28;
                                v35 = v29;
                                v37 = v30;
                            } else {
                                // 0x100003c04
                                v39 = v28;
                                v36 = v30;
                                if (v29 >= v28) {
                                    // 0x100003c1c
                                    v39 = 2 * v28;
                                    v40 = _realloc((int64_t *)v30, (int32_t)v39);
                                    v36 = (int64_t)v40;
                                    result = 0;
                                    if (v40 == NULL) {
                                        goto lab_0x100003d70;
                                    }
                                }
                                // 0x100003c58
                                v38 = (char *)(v32 + v10);
                                *(char *)(v36 + v29) = *v38;
                                v33 = v38;
                                v34 = v39;
                                v35 = v29 + 1;
                                v37 = v36;
                            }
                            // 0x100003c84
                            v41 = v37;
                            v42 = v35;
                            v43 = v27;
                            v44 = v31;
                            if (*v33 == 10) {
                                // 0x100003ca0
                                v43 = v27 - 1;
                                v44 = v27 == 2 ? 1 : v31;
                                v5 = v42;
                                v6 = v41;
                                if (v43 == 0) {
                                    goto lab_0x100003d24_2;
                                }
                            }
                            // 0x100003cec
                            v45 = v46 + 1;
                            v46 = v45;
                            v22 = v43;
                            v23 = v34;
                            v24 = v42;
                            v25 = v41;
                            v26 = v44;
                        }
                    }
                    // 0x100003cfc
                    v11 = v26;
                    v12 = v24;
                    v13 = v23;
                    v14 = v22;
                    v5 = v12;
                    v6 = v25;
                    if (v14 == 0) {
                        goto lab_0x100003d24_2;
                    }
                    v15 = v25;
                    v16 = _fread(&v9, 1, 256, (struct _IO_FILE *)v1);
                }
                // 0x100003d14
                _free((int64_t *)v15);
                result = 0;
            }
        }
    }
  lab_0x100003d70:;
    int64_t v47 = *(int64_t *)*(int64_t *)0x100004008; // 0x100003d84
    if (v47 != *(int64_t *)*(int64_t *)0x100004008) {
        // 0x100003d98
        ___stack_chk_fail();
    }
    // 0x100003d9c
    return result;
}

// Address range: 0x100003db0 - 0x100003eac
int64_t entry_point(void) {
    int64_t v1 = function_100003af4(); // 0x100003dd8
    if (v1 != 0) {
        // 0x100003df4
        _printf("The 7th line of input was:\n%s\n", (char *)7);
        _free((int64_t *)v1);
        // 0x100003e9c
        return 0;
    }
    // 0x100003e18
    _printf("Did not find the 7th line of input.  Reason:  ");
    if (_feof((struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004010) != 0) {
        // 0x100003e44
        _puts("End of file reached.");
        // 0x100003e9c
        return 0;
    }
    // 0x100003e54
    if (_ferror((struct _IO_FILE *)*(int64_t *)*(int64_t *)0x100004010) == 0) {
        // 0x100003e84
        _puts("Out of memory.");
    } else {
        // 0x100003e74
        _puts("Error reading input.");
    }
    // 0x100003e9c
    return 0;
}

// Address range: 0x100003eac - 0x100003eb8
int64_t function_100003eac(void) {
    // 0x100003eac
    return ___stack_chk_fail();
}

// Address range: 0x100003eb8 - 0x100003ec4
int32_t function_100003eb8(struct _IO_FILE * stream) {
    // 0x100003eb8
    return _feof(stream);
}

// Address range: 0x100003ec4 - 0x100003ed0
int32_t function_100003ec4(struct _IO_FILE * stream) {
    // 0x100003ec4
    return _ferror(stream);
}

// Address range: 0x100003ed0 - 0x100003edc
int32_t function_100003ed0(int64_t * ptr, int32_t size, int32_t n, struct _IO_FILE * stream) {
    // 0x100003ed0
    return _fread(ptr, size, n, stream);
}

// Address range: 0x100003edc - 0x100003ee8
void function_100003edc(int64_t * ptr) {
    // 0x100003edc
    _free(ptr);
}

// Address range: 0x100003ee8 - 0x100003ef4
int64_t * function_100003ee8(int32_t size) {
    // 0x100003ee8
    return _malloc(size);
}

// Address range: 0x100003ef4 - 0x100003f00
int32_t function_100003ef4(char * format, ...) {
    // 0x100003ef4
    return _printf(format);
}

// Address range: 0x100003f00 - 0x100003f0c
int32_t function_100003f00(char * s) {
    // 0x100003f00
    return _puts(s);
}

// Address range: 0x100003f0c - 0x100003f18
int64_t * function_100003f0c(int64_t * ptr, int32_t size) {
    // 0x100003f0c
    return _realloc(ptr, size);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 11

