//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int64_t entry_point(void);
int64_t function_1000035f4(void);
int64_t function_100003858(void);
int64_t function_100003934(void);
int64_t function_100003b40(void);
int32_t function_100003ed4(char * format, ...);
int32_t function_100003ee0(int32_t c);
int32_t function_100003eec(void);
int32_t function_100003ef8(char * format, ...);

// --------------------- Global Variables ---------------------

int32_t * g1 = (int32_t *)0x100000cfeedfacf; // 0x100008000
int32_t g2 = 0; // 0x100008008
int32_t * g3 = (int32_t *)0x1200000002; // 0x10000800c
int32_t g4 = 18; // 0x100008010
int32_t * g5 = (int32_t *)0x200085; // 0x100008018
int32_t g6 = 25; // 0x100008020
int32_t * g7 = (int32_t *)0x41505f5f00000048; // 0x100008024
char g8[5] = "__PA"; // 0x100008028

// ------- Dynamically Linked Functions Without Header --------

int32_t _printf(char * a1, ...);
int32_t _putchar(int32_t a1);
int32_t _rand(void);
int32_t _scanf(char * a1, ...);

// ------------------------ Functions -------------------------

// Address range: 0x1000035f4 - 0x100003858
int64_t function_1000035f4(void) {
    int32_t v1 = 0;
    uint64_t v2 = 0;
    int64_t v3 = 12 * v2; // 0x10000361c
    int32_t v4 = *(int32_t *)(v3 + (int64_t)&g1); // 0x100003628
    int32_t result; // 0x1000035f4
    if (v4 != 0) {
        // 0x10000363c
        if (*(int32_t *)(v3 + (int64_t)&g1 + 4) == v4) {
            // 0x100003678
            result = v4;
            if (*(int32_t *)(v3 + (int64_t)&g1 + 8) == v4) {
                // 0x10000384c
                return result;
            }
        }
    }
    int64_t v5 = 4 * v2; // 0x1000036e0
    int32_t v6 = *(int32_t *)(v5 + (int64_t)&g1); // 0x1000036e0
    if (v6 != 0) {
        // 0x1000036f4
        if (*(int32_t *)(v5 + (int64_t)&g3) == v6) {
            // 0x100003720
            result = v6;
            if (*(int32_t *)(v5 + (int64_t)&g5) == v6) {
                // 0x10000384c
                return result;
            }
        }
    }
    int64_t v7 = v2 + 1;
    while (v2 < 2 != (1 - v1 & (int32_t)v7) < 0) {
        // 0x100003614
        v1++;
        v2 = v7;
        v3 = 12 * v2;
        v4 = *(int32_t *)(v3 + (int64_t)&g1);
        if (v4 != 0) {
            // 0x10000363c
            if (*(int32_t *)(v3 + (int64_t)&g1 + 4) == v4) {
                // 0x100003678
                result = v4;
                if (*(int32_t *)(v3 + (int64_t)&g1 + 8) == v4) {
                    // 0x10000384c
                    return result;
                }
            }
        }
        // 0x1000036d4
        v5 = 4 * v2;
        v6 = *(int32_t *)(v5 + (int64_t)&g1);
        if (v6 != 0) {
            // 0x1000036f4
            if (*(int32_t *)(v5 + (int64_t)&g3) == v6) {
                // 0x100003720
                result = v6;
                if (*(int32_t *)(v5 + (int64_t)&g5) == v6) {
                    // 0x10000384c
                    return result;
                }
            }
        }
        // 0x100003768
        v7 = v2 + 1;
    }
    int32_t v8 = g4; // 0x100003780
    if (v8 == 0) {
        // 0x10000384c
        return 0;
    }
    int32_t v9 = *(int32_t *)&g1; // 0x1000037a8
    result = v8;
    if (v8 == v9 != (g6 == v9)) {
        // 0x1000037f0
        result = v8 == *(int32_t *)&g5 == g2 == v8 ? v8 : 0;
    }
    // 0x10000384c
    return result;
}

// Address range: 0x100003858 - 0x100003934
int64_t function_100003858(void) {
    int32_t v1 = 0; // 0x100003908
    int64_t v2; // 0x100003858
    for (int32_t i = 0; i < 3; i++) {
        // 0x1000038a8
        _printf("%c ", (char)v2);
    }
    // 0x100003904
    v1++;
    _putchar(10);
    while (v1 != 3) {
        for (int32_t i = 0; i < 3; i++) {
            // 0x1000038a8
            _printf("%c ", (char)v2);
        }
        // 0x100003904
        v1++;
        _putchar(10);
    }
    // 0x10000391c
    return _printf("-----\n");
}

// Address range: 0x100003934 - 0x100003b40
int64_t function_100003934(void) {
    // 0x100003934
    int64_t v1; // 0x100003934
    int32_t v2 = v1; // 0x100003940
    int32_t v3 = function_1000035f4(); // 0x100003958
    if (v3 != 0) {
        // 0x100003b30
        return v3 != v2 ? -1 : 1;
    }
    int32_t v4 = 0;
    int32_t v5 = -1;
    for (int64_t i = 0; i < 3; i++) {
        int64_t v6 = 12 * i + (int64_t)&g1; // 0x1000039e0
        int32_t v7 = i;
        int32_t v8 = v5;
        int64_t v9 = 0;
        int32_t * v10 = (int32_t *)(v6 + 4 * v9); // 0x1000039e8
        int32_t v11 = v8; // 0x1000039f4
        int32_t v12 = v4; // 0x1000039f4
        int32_t v13; // 0x100003a58
        int32_t v14; // 0x100003a7c
        bool v15; // 0x100003a80
        if (*v10 == 0) {
            // 0x100003a00
            *v10 = v2;
            v13 = -(int32_t)function_100003934();
            *v10 = 0;
            v14 = v13 - v8;
            v15 = v14 == 0 | v14 < 0 != ((v14 ^ v13) & (v8 ^ v13)) < 0;
            v11 = v15 ? v8 : v13;
            v12 = v2;
            if ((int32_t)v1 == 0 && !v15) {
                // 0x100003aa4
                *(int32_t *)&g7 = v7;
                *(int32_t *)&g8 = (int32_t)v9;
                v11 = v13;
                v12 = v2;
            }
        }
        // 0x100003ad4
        v4 = v12;
        v5 = v11;
        int64_t v16 = v9 + 1;
        while (v16 != 3) {
            // 0x1000039cc
            v8 = v5;
            v9 = v16;
            v10 = (int32_t *)(v6 + 4 * v9);
            v11 = v8;
            v12 = v4;
            if (*v10 == 0) {
                // 0x100003a00
                *v10 = v2;
                v13 = -(int32_t)function_100003934();
                *v10 = 0;
                v14 = v13 - v8;
                v15 = v14 == 0 | v14 < 0 != ((v14 ^ v13) & (v8 ^ v13)) < 0;
                v11 = v15 ? v8 : v13;
                v12 = v2;
                if ((int32_t)v1 == 0 && !v15) {
                    // 0x100003aa4
                    *(int32_t *)&g7 = v7;
                    *(int32_t *)&g8 = (int32_t)v9;
                    v11 = v13;
                    v12 = v2;
                }
            }
            // 0x100003ad4
            v4 = v12;
            v5 = v11;
            v16 = v9 + 1;
        }
    }
    // 0x100003b30
    return v4 == 0 ? 0 : v5;
}

// Address range: 0x100003b40 - 0x100003e8c
int64_t function_100003b40(void) {
    for (int64_t i = 0; i < 3; i++) {
        int64_t v1 = 12 * i + (int64_t)&g1; // 0x100003ba0
        for (int64_t j = 0; j < 3; j++) {
            // 0x100003b8c
            *(int32_t *)(v1 + 4 * j) = 0;
        }
    }
    // 0x100003bd8
    _printf("Board postions are numbered so:\n1 2 3\n4 5 6\n7 8 9\n");
    _printf("You have O, I have X.\n\n");
    int64_t v2; // 0x100003b40
    int32_t v3 = v2; // 0x100003b40
    uint32_t v4 = 0;
    int32_t v5; // 0x100003b40
    int32_t v6; // 0x100003b40
    int32_t v7; // 0x100003b40
    int32_t v8; // 0x100003b40
    int32_t v9; // 0x100003b40
    int32_t v10; // 0x100003d98
    uint32_t v11; // 0x100003c6c
    int32_t * v12; // 0x100003b40
    int64_t * v13; // 0x100003b40
    int32_t v14; // 0x100003b40
    int64_t v15; // 0x100003b40
    int64_t v16; // 0x100003b40
    int64_t v17; // 0x100003b40
    if (v3 == 0) {
        if (v4 == 0) {
            // 0x100003d38
            *(int32_t *)&g7 = _rand() % 3;
            v14 = _rand() % 3;
            *(int32_t *)&g8 = v14;
            v5 = v14;
            v16 = v15;
        } else {
            // 0x100003d80
            function_100003934();
            v5 = *(int32_t *)&g8;
            v16 = 0;
        }
        // 0x100003d90
        v10 = *(int32_t *)&g7;
        *(int32_t *)(4 * (int64_t)v5 + (int64_t)&g1 + 12 * (int64_t)v10) = -1;
        _printf("My move: %d\n", v16);
        v9 = v6;
        v17 = v16;
    } else {
        // 0x100003c24
        v13 = (int64_t *)v15;
        v7 = v6;
        while (true) {
            // 0x100003c24
            v8 = v7;
            _printf("your move: ");
            if (_scanf("%d", v13) == 0) {
                _scanf("%*s", v13, (char **)v2);
                _printf("your move: ");
                while (_scanf("%d", v13) == 0) {
                    // 0x100003c58
                    _scanf("%*s", v13, (char **)v2);
                    _printf("your move: ");
                }
            }
            // 0x100003c68
            v11 = v8 - 1;
            if (v11 >= 0) {
                if (v8 < 10 != (v11 & 9 - v8) < 0) {
                    // 0x100003c9c
                    v12 = (int32_t *)(12 * (int64_t)(v11 / 3) + (int64_t)&g1 + (int64_t)(4 * (v11 % 3)));
                    if (*v12 == 0) {
                        // break -> 0x100003d10
                        break;
                    }
                }
            }
            // 0x100003c10
            v7 = v11;
        }
        // 0x100003d10
        *v12 = 1;
        v9 = v11;
        v17 = v15;
    }
    // 0x100003df8
    function_100003858();
    int32_t v18 = function_1000035f4();
    while (v18 == 0) {
        // 0x100003bf8
        v3 = v3 == 0;
        char * v19 = "A draw.\n\n"; // 0x100003c04
        if (v4 >= 8) {
            // 0x100003e7c
            return (int64_t)v19;
        }
        v4++;
        int32_t v20 = v9;
        int64_t v21 = v17;
        if (v3 == 0) {
            if (v4 == 0) {
                // 0x100003d38
                *(int32_t *)&g7 = _rand() % 3;
                v14 = _rand() % 3;
                *(int32_t *)&g8 = v14;
                v5 = v14;
                v16 = v21;
            } else {
                // 0x100003d80
                function_100003934();
                v5 = *(int32_t *)&g8;
                v16 = 0;
            }
            // 0x100003d90
            v10 = *(int32_t *)&g7;
            *(int32_t *)(4 * (int64_t)v5 + (int64_t)&g1 + 12 * (int64_t)v10) = -1;
            _printf("My move: %d\n", v16);
            v9 = v20;
            v17 = v16;
        } else {
            // 0x100003c24
            v13 = (int64_t *)v21;
            v7 = v20;
            while (true) {
                // 0x100003c24
                v8 = v7;
                _printf("your move: ");
                if (_scanf("%d", v13) == 0) {
                    _scanf("%*s", v13, (char **)v2);
                    _printf("your move: ");
                    while (_scanf("%d", v13) == 0) {
                        // 0x100003c58
                        _scanf("%*s", v13, (char **)v2);
                        _printf("your move: ");
                    }
                }
                // 0x100003c68
                v11 = v8 - 1;
                if (v11 >= 0) {
                    if (v8 < 10 != (v11 & 9 - v8) < 0) {
                        // 0x100003c9c
                        v12 = (int32_t *)(12 * (int64_t)(v11 / 3) + (int64_t)&g1 + (int64_t)(4 * (v11 % 3)));
                        if (*v12 == 0) {
                            // break -> 0x100003d10
                            break;
                        }
                    }
                }
                // 0x100003c10
                v7 = v11;
            }
            // 0x100003d10
            *v12 = 1;
            v9 = v11;
            v17 = v21;
        }
        // 0x100003df8
        function_100003858();
        v18 = function_1000035f4();
    }
    // 0x100003e7c
    return (int64_t)(v18 != 1 ? "I win.\n\n" : "You win.\n\n");
}

// Address range: 0x100003e8c - 0x100003ed4
int64_t entry_point(void) {
    // 0x100003e8c
    while (true) {
        // 0x100003ea4
        function_100003b40();
        int64_t v1; // 0x100003e8c
        _printf("%s", (char *)v1);
    }
}

// Address range: 0x100003ed4 - 0x100003ee0
int32_t function_100003ed4(char * format, ...) {
    // 0x100003ed4
    return _printf(format);
}

// Address range: 0x100003ee0 - 0x100003eec
int32_t function_100003ee0(int32_t c) {
    // 0x100003ee0
    return _putchar(c);
}

// Address range: 0x100003eec - 0x100003ef8
int32_t function_100003eec(void) {
    // 0x100003eec
    return _rand();
}

// Address range: 0x100003ef8 - 0x100003f04
int32_t function_100003ef8(char * format, ...) {
    // 0x100003ef8
    return _scanf(format);
}

// --------------------- Meta-Information ---------------------

// Detected functions: 9

